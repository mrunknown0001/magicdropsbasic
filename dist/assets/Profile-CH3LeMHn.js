import{G as or,b as _e,r as c,b9 as Ye,j as s,m as ae,aB as jt,e as ne,aN as ur,d as cr,bq as Xe,ab as dr,aT as nt,br as at,a4 as mr,at as Nt,I as C,bs as Et,a2 as fr,u as $t,a$ as hr,i as pr,p as gr,af as St,bt as br,U as b,bu as xr,ay as vr,L as Pt,t as yr,h as wr,z as Ve}from"./index-C2zOcIr5.js";import{u as Ct}from"./useProfileStats-BhLykZ56.js";import{K as kr}from"./KycDocumentUpload-fkAmUNAE.js";import"./external-link-Bq5Q6tnA.js";import"./upload-DWuvDsn2.js";const jr=({profileData:e,isEditing:t,isVerified:r,formattedDate:n,onEdit:a,onPasswordModalOpen:l})=>{const u=or(),{settings:o}=_e(),[i,m]=c.useState(()=>Ye(e,o));c.useEffect(()=>{const h=Ye(e,o);m(h),console.log("üõ°Ô∏è ProfileHeader: Profile or settings changed, updating KYC status:",{profile_id:e==null?void 0:e.id,kyc_status:e==null?void 0:e.kyc_status,isRequired:h.isRequired,isApproved:h.isApproved,isBlocked:h.isBlocked,shouldShowBanner:h.isRequired&&h.isBlocked})},[e,o,e==null?void 0:e.kyc_status,e==null?void 0:e.updated_at]);const f=i.isRequired&&i.isBlocked;return s.jsxs(s.Fragment,{children:[f&&s.jsx(ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800/30 rounded-xl p-4 shadow-sm mb-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5",children:s.jsx(jt,{className:"h-5 w-5 text-amber-500"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-app font-app-medium text-amber-800 dark:text-amber-300",children:i.statusInfo.title}),s.jsxs("div",{className:"mt-1 text-sm text-amber-700 dark:text-amber-400",children:[s.jsx("p",{children:i.statusInfo.message}),s.jsx("div",{className:"mt-3",children:s.jsx(ne,{variant:"outline",size:"sm",leftIcon:s.jsx(ur,{size:14}),className:"border-amber-300 dark:border-amber-700 text-amber-700 dark:text-amber-300 hover:bg-amber-100 dark:hover:bg-amber-900/30",onClick:()=>u("/kyc"),children:i.statusInfo.actionText})})]})]})]})}),s.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-app font-app-semibold text-gray-900 dark:text-white",children:"Mein Profil"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Hier k√∂nnen Sie Ihre pers√∂nlichen Daten einsehen und bearbeiten."})]}),s.jsxs("div",{className:"mt-4 md:mt-0 flex flex-col md:flex-row items-start md:items-center space-y-2 md:space-y-0 md:space-x-4",children:[s.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 px-3 py-1.5 rounded-lg shadow-sm",children:[s.jsx(cr,{className:"text-accent mr-2",size:16}),s.jsx("p",{className:"text-sm font-app text-gray-700 dark:text-gray-300",children:n})]}),!t&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(ne,{type:"button",variant:"outline",leftIcon:s.jsx(Xe,{size:16}),onClick:l,className:"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300",children:"Passwort √§ndern"}),s.jsx(ne,{type:"button",variant:"primary",leftIcon:s.jsx(dr,{size:16}),onClick:a,children:"Profil bearbeiten"})]})]})]})})]})},Nr=({activeTab:e,setActiveTab:t,children:r})=>{const{colors:n}=_e();return s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-wrap border-b border-gray-200 dark:border-gray-700 mb-6 pb-1 gap-2",children:[s.jsxs("button",{type:"button",className:`px-4 py-2 font-app font-app-medium text-sm rounded-md ${e==="personal"?`bg-[${n.primary}]/10 text-[${n.primary}] dark:bg-[${n.primary}]/20 dark:text-white`:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>t("personal"),children:[s.jsx(nt,{className:"inline-block mr-1",size:16}),"Pers√∂nliche Daten"]}),s.jsxs("button",{type:"button",className:`px-4 py-2 font-app font-app-medium text-sm rounded-md ${e==="address"?`bg-[${n.primary}]/10 text-[${n.primary}] dark:bg-[${n.primary}]/20 dark:text-white`:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>t("address"),children:[s.jsx(at,{className:"inline-block mr-1",size:16}),"Adresse"]}),s.jsxs("button",{type:"button",className:`px-4 py-2 font-app font-app-medium text-sm rounded-md ${e==="financial"?`bg-[${n.primary}]/10 text-[${n.primary}] dark:bg-[${n.primary}]/20 dark:text-white`:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>t("financial"),children:[s.jsx(mr,{className:"inline-block mr-1",size:16}),"Finanzdaten"]}),s.jsxs("button",{type:"button",className:`px-4 py-2 font-app font-app-medium text-sm rounded-md ${e==="payroll"?`bg-[${n.primary}]/10 text-[${n.primary}] dark:bg-[${n.primary}]/20 dark:text-white`:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>t("payroll"),children:[s.jsx(Nt,{className:"inline-block mr-1",size:16}),"Lohnabrechnung"]})]}),r]})},Er=({register:e,errors:t})=>{var n,a,l,u;const r={inactive:{opacity:0,y:10},active:{opacity:1,y:0}};return s.jsxs(ae.div,{className:"space-y-4",initial:"inactive",animate:"active",variants:r,transition:{duration:.3},children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(C,{label:"Vorname",...e("first_name",{required:"Vorname ist erforderlich"}),error:(n=t.first_name)==null?void 0:n.message}),s.jsx(C,{label:"Nachname",...e("last_name",{required:"Nachname ist erforderlich"}),error:(a=t.last_name)==null?void 0:a.message})]}),s.jsx(C,{label:"Geburtsdatum",type:"date",...e("date_of_birth"),error:(l=t.date_of_birth)==null?void 0:l.message}),s.jsx(C,{label:"Nationalit√§t",...e("nationality"),error:(u=t.nationality)==null?void 0:u.message,placeholder:"z.B. DE f√ºr Deutschland"}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(nt,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-600 dark:text-blue-300",children:"Hinweis"}),s.jsx("p",{className:"mt-1 text-sm text-blue-500 dark:text-blue-400",children:"Bitte geben Sie Ihre korrekten pers√∂nlichen Daten ein. Diese Informationen werden f√ºr die Vertragsabwicklung ben√∂tigt."})]})]})})]})},$r=({register:e,errors:t})=>{var n,a,l;const r={inactive:{opacity:0,y:10},active:{opacity:1,y:0}};return s.jsxs(ae.div,{className:"space-y-4",initial:"inactive",animate:"active",variants:r,transition:{duration:.3},children:[s.jsx(C,{label:"Stra√üe und Hausnummer",...e("street"),error:(n=t.street)==null?void 0:n.message}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(C,{label:"Postleitzahl",...e("postal_code"),error:(a=t.postal_code)==null?void 0:a.message}),s.jsx(C,{label:"Stadt",...e("city"),error:(l=t.city)==null?void 0:l.message})]}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(at,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-600 dark:text-blue-300",children:"Hinweis"}),s.jsx("p",{className:"mt-1 text-sm text-blue-500 dark:text-blue-400",children:"Bitte geben Sie Ihre aktuelle Adresse ein. Diese wird f√ºr offizielle Dokumente und Korrespondenz verwendet."})]})]})})]})},Sr=({register:e,errors:t})=>{var n,a,l;const r={inactive:{opacity:0,y:10},active:{opacity:1,y:0}};return s.jsxs(ae.div,{className:"space-y-4",initial:"inactive",animate:"active",variants:r,transition:{duration:.3},children:[s.jsx(C,{label:"Kontoinhaber",...e("recipient_name"),error:(n=t.recipient_name)==null?void 0:n.message,placeholder:"Name des Kontoinhabers"}),s.jsx(C,{label:"IBAN",...e("iban",{pattern:{value:/^[A-Z]{2}[0-9]{2}[A-Z0-9]{1,30}$/,message:"Bitte geben Sie eine g√ºltige IBAN ein"}}),error:(a=t.iban)==null?void 0:a.message,placeholder:"z.B. DE12500105170648489890"}),s.jsx(C,{label:"BIC",...e("bic"),error:(l=t.bic)==null?void 0:l.message,placeholder:"z.B. BYLADEM1001"}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Et,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-600 dark:text-blue-300",children:"Hinweis"}),s.jsx("p",{className:"mt-1 text-sm text-blue-500 dark:text-blue-400",children:"Diese Bankdaten werden f√ºr die Auszahlung Ihres Gehalts verwendet. Bitte stellen Sie sicher, dass die Angaben korrekt sind."})]})]})})]})},Pr=({register:e,errors:t,healthInsuranceOptions:r})=>{var a,l,u;const n={inactive:{opacity:0,y:10},active:{opacity:1,y:0}};return s.jsxs(ae.div,{className:"space-y-4",initial:"inactive",animate:"active",variants:n,transition:{duration:.3},children:[s.jsx("div",{children:s.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:"Informationen f√ºr die Lohnabrechnung"})}),s.jsx(C,{label:"Steuernummer",...e("tax_number"),error:(a=t.tax_number)==null?void 0:a.message}),s.jsx(C,{label:"Sozialversicherungsnummer",...e("social_security_number"),error:(l=t.social_security_number)==null?void 0:l.message}),s.jsx(fr,{label:"Krankenkasse",options:r,...e("health_insurance"),error:(u=t.health_insurance)==null?void 0:u.message}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Nt,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-600 dark:text-blue-300",children:"Hinweis"}),s.jsx("p",{className:"mt-1 text-sm text-blue-500 dark:text-blue-400",children:"Bitte geben Sie Ihre korrekten Daten ein. Diese Informationen werden f√ºr die Lohnabrechnung ben√∂tigt."})]})]})})]})},Cr=({profileData:e,isAdmin:t,healthInsuranceOptions:r})=>{var u;const{user:n}=$t(),{fetchProfileData:a}=Ct(),l=()=>{a(!0)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-6 border border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center mb-5",children:[s.jsx("div",{className:"p-2 rounded-lg bg-accent/10 dark:bg-gray-700 text-accent dark:text-white mr-3",children:s.jsx(nt,{size:18})}),s.jsx("h3",{className:"text-base font-app font-app-medium text-gray-800 dark:text-gray-200",children:"Pers√∂nliche Informationen"})]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"block text-sm font-app text-gray-500 dark:text-gray-400 mb-1",children:"Name"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-app font-app-medium",children:`${(e==null?void 0:e.first_name)||""} ${(e==null?void 0:e.last_name)||""}`.trim()||"Nicht angegeben"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"block text-sm font-app text-gray-500 dark:text-gray-400 mb-1",children:"E-Mail"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(hr,{className:"text-gray-400 mr-2",size:14}),s.jsx("p",{className:"text-gray-900 dark:text-white font-app font-app-medium",children:(n==null?void 0:n.email)||"Nicht angegeben"})]})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"block text-sm font-app text-gray-500 dark:text-gray-400 mb-1",children:"Geburtsdatum"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-app font-app-medium",children:e!=null&&e.date_of_birth?new Date(e.date_of_birth).toLocaleDateString("de-DE"):"Nicht angegeben"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"block text-sm font-app text-gray-500 dark:text-gray-400 mb-1",children:"Nationalit√§t"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-app font-app-medium",children:(e==null?void 0:e.nationality)||"Nicht angegeben"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"block text-sm font-app text-gray-500 dark:text-gray-400 mb-1",children:"Rolle"}),t?s.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-app font-app-semibold shadow-lg border-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white border-purple-300 dark:border-purple-400 hover:shadow-purple-200 dark:hover:shadow-purple-900/30 transition-all duration-200",children:[s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM15.657 6.343a1 1 0 011.414 0A9.972 9.972 0 0119 12a9.972 9.972 0 01-1.929 5.657 1 1 0 11-1.414-1.414A7.971 7.971 0 0017 12c0-1.933-.685-3.711-1.829-5.1a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Administrator"]}):s.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-app font-app-semibold shadow-lg border-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white border-blue-300 dark:border-blue-400 hover:shadow-blue-200 dark:hover:shadow-blue-900/30 transition-all duration-200",children:[s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Mitarbeiter"]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-6 border border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center mb-5",children:[s.jsx("div",{className:"p-2 rounded-lg bg-accent/10 dark:bg-gray-700 text-accent dark:text-white mr-3",children:s.jsx(at,{size:18})}),s.jsx("h3",{className:"text-base font-app font-app-medium text-gray-800 dark:text-gray-200",children:"Adresse"})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"block text-sm font-app text-gray-500 dark:text-gray-400 mb-1",children:"Anschrift"}),s.jsx("div",{className:"p-3 bg-white dark:bg-gray-700/50 rounded-md border border-gray-200 dark:border-gray-600",children:e!=null&&e.street?s.jsxs("p",{className:"text-gray-900 dark:text-white font-app",children:[e.street,s.jsx("br",{}),e.postal_code," ",e.city]}):s.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-app italic",children:"Nicht angegeben"})})]})})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-6 border border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center mb-5",children:[s.jsx("div",{className:"p-2 rounded-lg bg-accent/10 dark:bg-gray-700 text-accent dark:text-white mr-3",children:s.jsx(Et,{size:18})}),s.jsx("h3",{className:"text-base font-app font-app-medium text-gray-800 dark:text-gray-200",children:"Finanzielle Daten"})]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"block text-sm font-app text-gray-500 dark:text-gray-400 mb-1",children:"Bankverbindung"}),s.jsx("div",{className:"p-3 bg-white dark:bg-gray-700/50 rounded-md border border-gray-200 dark:border-gray-600",children:e!=null&&e.iban?s.jsxs("p",{className:"text-gray-900 dark:text-white font-app",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Empf√§nger:"})," ",e.recipient_name||e.first_name+" "+e.last_name,s.jsx("br",{}),s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"IBAN:"})," ",e.iban,s.jsx("br",{}),s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"BIC:"})," ",e.bic||"Nicht angegeben"]}):s.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-app italic",children:"Nicht angegeben"})})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"block text-sm font-app text-gray-500 dark:text-gray-400 mb-1",children:"Steuernummer"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-app font-app-medium",children:(e==null?void 0:e.tax_number)||"Nicht angegeben"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"block text-sm font-app text-gray-500 dark:text-gray-400 mb-1",children:"Sozialversicherungsnummer"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-app font-app-medium",children:(e==null?void 0:e.social_security_number)||"Nicht angegeben"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"block text-sm font-app text-gray-500 dark:text-gray-400 mb-1",children:"Krankenkasse"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-app font-app-medium",children:e!=null&&e.health_insurance?((u=r.find(o=>o.value===e.health_insurance))==null?void 0:u.label)||e.health_insurance:"Nicht angegeben"})]})]})]})]})]}),!t&&s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Identit√§tsverifizierung"]}),s.jsx(kr,{onUploadComplete:l})]})]})},Fr=({formMethods:e,isEditing:t,activeTab:r,setActiveTab:n,onSubmit:a,onCancel:l,onPasswordModalOpen:u,healthInsuranceOptions:o,isSubmitting:i,profileData:m,isAdmin:f})=>{const{register:h,handleSubmit:p,formState:{errors:d}}=e;return s.jsxs("form",{onSubmit:p(a),children:[s.jsx(pr,{className:"space-y-6 px-6 pb-6",children:t?s.jsxs(Nr,{activeTab:r,setActiveTab:n,children:[r==="personal"&&s.jsx(Er,{register:h,errors:d}),r==="address"&&s.jsx($r,{register:h,errors:d}),r==="financial"&&s.jsx(Sr,{register:h,errors:d}),r==="payroll"&&s.jsx(Pr,{register:h,errors:d,healthInsuranceOptions:o})]}):s.jsx(Cr,{profileData:m,isAdmin:f,healthInsuranceOptions:o})}),t&&s.jsxs(gr,{className:"flex justify-end space-x-2 px-6",children:[s.jsx(ne,{type:"button",variant:"outline",leftIcon:s.jsx(St,{size:16}),onClick:l,children:"Abbrechen"}),s.jsx(ne,{type:"submit",leftIcon:s.jsx(br,{size:16}),isLoading:i,children:"Speichern"})]})]})};var _r=Object.defineProperty,Ar=(e,t,r)=>t in e?_r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ue=(e,t,r)=>(Ar(e,typeof t!="symbol"?t+"":t,r),r);let Tr=class{constructor(){Ue(this,"current",this.detect()),Ue(this,"handoffState","pending"),Ue(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},K=new Tr;function Ae(e){var t,r;return K.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?(r=(t=e.current)==null?void 0:t.ownerDocument)!=null?r:document:null:document}function Te(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function q(){let e=[],t={addEventListener(r,n,a,l){return r.addEventListener(n,a,l),t.add(()=>r.removeEventListener(n,a,l))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return t.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return Te(()=>{n.current&&r[0]()}),t.add(()=>{n.current=!1})},style(r,n,a){let l=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:a}),this.add(()=>{Object.assign(r.style,{[n]:l})})},group(r){let n=q();return r(n),this.add(()=>n.dispose())},add(r){return e.includes(r)||e.push(r),()=>{let n=e.indexOf(r);if(n>=0)for(let a of e.splice(n,1))a()}},dispose(){for(let r of e.splice(0))r()}};return t}function st(){let[e]=c.useState(q);return c.useEffect(()=>()=>e.dispose(),[e]),e}let P=(e,t)=>{K.isServer?c.useEffect(e,t):c.useLayoutEffect(e,t)};function le(e){let t=c.useRef(e);return P(()=>{t.current=e},[e]),t}let k=function(e){let t=le(e);return b.useCallback((...r)=>t.current(...r),[t])},Or=c.createContext(void 0);function Ir(){return c.useContext(Or)}function Ze(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function W(e,t,...r){if(e in t){let a=t[e];return typeof a=="function"?a(...r):a}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,W),n}var Pe=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Pe||{}),X=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(X||{});function R(){let e=Lr();return c.useCallback(t=>Rr({mergeRefs:e,...t}),[e])}function Rr({ourProps:e,theirProps:t,slot:r,defaultTag:n,features:a,visible:l=!0,name:u,mergeRefs:o}){o=o??Mr;let i=Ft(t,e);if(l)return Ee(i,r,n,u,o);let m=a??0;if(m&2){let{static:f=!1,...h}=i;if(f)return Ee(h,r,n,u,o)}if(m&1){let{unmount:f=!0,...h}=i;return W(f?0:1,{0(){return null},1(){return Ee({...h,hidden:!0,style:{display:"none"}},r,n,u,o)}})}return Ee(i,r,n,u,o)}function Ee(e,t={},r,n,a){let{as:l=r,children:u,refName:o="ref",...i}=De(e,["unmount","static"]),m=e.ref!==void 0?{[o]:e.ref}:{},f=typeof u=="function"?u(t):u;"className"in i&&i.className&&typeof i.className=="function"&&(i.className=i.className(t)),i["aria-labelledby"]&&i["aria-labelledby"]===i.id&&(i["aria-labelledby"]=void 0);let h={};if(t){let p=!1,d=[];for(let[g,v]of Object.entries(t))typeof v=="boolean"&&(p=!0),v===!0&&d.push(g.replace(/([A-Z])/g,x=>`-${x.toLowerCase()}`));if(p){h["data-headlessui-state"]=d.join(" ");for(let g of d)h[`data-${g}`]=""}}if(l===c.Fragment&&(Object.keys(ee(i)).length>0||Object.keys(ee(h)).length>0))if(!c.isValidElement(f)||Array.isArray(f)&&f.length>1){if(Object.keys(ee(i)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ee(i)).concat(Object.keys(ee(h))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=f.props,d=p==null?void 0:p.className,g=typeof d=="function"?(...y)=>Ze(d(...y),i.className):Ze(d,i.className),v=g?{className:g}:{},x=Ft(f.props,ee(De(i,["ref"])));for(let y in h)y in x&&delete h[y];return c.cloneElement(f,Object.assign({},x,h,m,{ref:a(Br(f),m.ref)},v))}return c.createElement(l,Object.assign({},De(i,["ref"]),l!==c.Fragment&&m,l!==c.Fragment&&h),f)}function Lr(){let e=c.useRef([]),t=c.useCallback(r=>{for(let n of e.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return e.current=r,t}}function Mr(...e){return e.every(t=>t==null)?void 0:t=>{for(let r of e)r!=null&&(typeof r=="function"?r(t):r.current=t)}}function Ft(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let n of e)for(let a in n)a.startsWith("on")&&typeof n[a]=="function"?(r[a]!=null||(r[a]=[]),r[a].push(n[a])):t[a]=n[a];if(t.disabled||t["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[a=>{var l;return(l=a==null?void 0:a.preventDefault)==null?void 0:l.call(a)}]);for(let n in r)Object.assign(t,{[n](a,...l){let u=r[n];for(let o of u){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;o(a,...l)}}});return t}function _(e){var t;return Object.assign(c.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function ee(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function De(e,t=[]){let r=Object.assign({},e);for(let n of t)n in r&&delete r[n];return r}function Br(e){return b.version.split(".")[0]>="19"?e.props.ref:e.ref}let zr="span";var Ce=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Ce||{});function Kr(e,t){var r;let{features:n=1,...a}=e,l={ref:t,"aria-hidden":(n&2)===2?!0:(r=a["aria-hidden"])!=null?r:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return R()({ourProps:l,theirProps:a,slot:{},defaultTag:zr,name:"Hidden"})}let Je=_(Kr);function _t(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function J(e){return _t(e)&&"tagName"in e}function se(e){return J(e)&&"accessKey"in e}function Z(e){return J(e)&&"tabIndex"in e}function Hr(e){return J(e)&&"style"in e}function Vr(e){return se(e)&&e.nodeName==="IFRAME"}function Ur(e){return se(e)&&e.nodeName==="INPUT"}let At=Symbol();function Dr(e,t=!0){return Object.assign(e,{[At]:t})}function H(...e){let t=c.useRef(e);c.useEffect(()=>{t.current=e},[e]);let r=k(n=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(n):a.current=n)});return e.every(n=>n==null||(n==null?void 0:n[At]))?void 0:r}let lt=c.createContext(null);lt.displayName="DescriptionContext";function Tt(){let e=c.useContext(lt);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Tt),t}return e}function Wr(){let[e,t]=c.useState([]);return[e.length>0?e.join(" "):void 0,c.useMemo(()=>function(r){let n=k(l=>(t(u=>[...u,l]),()=>t(u=>{let o=u.slice(),i=o.indexOf(l);return i!==-1&&o.splice(i,1),o}))),a=c.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props,value:r.value}),[n,r.slot,r.name,r.props,r.value]);return b.createElement(lt.Provider,{value:a},r.children)},[t])]}let qr="p";function Gr(e,t){let r=c.useId(),n=Ir(),{id:a=`headlessui-description-${r}`,...l}=e,u=Tt(),o=H(t);P(()=>u.register(a),[a,u.register]);let i=n||!1,m=c.useMemo(()=>({...u.slot,disabled:i}),[u.slot,i]),f={ref:o,...u.props,id:a};return R()({ourProps:f,theirProps:l,slot:m,defaultTag:qr,name:u.name||"Description"})}let Yr=_(Gr),Xr=Object.assign(Yr,{});var Ot=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Ot||{});let Zr=c.createContext(()=>{});function Jr({value:e,children:t}){return b.createElement(Zr.Provider,{value:e},t)}let It=class extends Map{constructor(t){super(),this.factory=t}get(t){let r=super.get(t);return r===void 0&&(r=this.factory(t),this.set(t,r)),r}};var Qr=Object.defineProperty,en=(e,t,r)=>t in e?Qr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tn=(e,t,r)=>(en(e,t+"",r),r),Rt=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},I=(e,t,r)=>(Rt(e,t,"read from private field"),r?r.call(e):t.get(e)),We=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},dt=(e,t,r,n)=>(Rt(e,t,"write to private field"),t.set(e,r),r),z,fe,he;let rn=class{constructor(t){We(this,z,{}),We(this,fe,new It(()=>new Set)),We(this,he,new Set),tn(this,"disposables",q()),dt(this,z,t),K.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return I(this,z)}subscribe(t,r){if(K.isServer)return()=>{};let n={selector:t,callback:r,current:t(I(this,z))};return I(this,he).add(n),this.disposables.add(()=>{I(this,he).delete(n)})}on(t,r){return K.isServer?()=>{}:(I(this,fe).get(t).add(r),this.disposables.add(()=>{I(this,fe).get(t).delete(r)}))}send(t){let r=this.reduce(I(this,z),t);if(r!==I(this,z)){dt(this,z,r);for(let n of I(this,he)){let a=n.selector(I(this,z));Lt(n.current,a)||(n.current=a,n.callback(a))}for(let n of I(this,fe).get(t.type))n(I(this,z),t)}}};z=new WeakMap,fe=new WeakMap,he=new WeakMap;function Lt(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:qe(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:qe(e.entries(),t.entries()):mt(e)&&mt(t)?qe(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function qe(e,t){do{let r=e.next(),n=t.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function mt(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var nn=Object.defineProperty,an=(e,t,r)=>t in e?nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ft=(e,t,r)=>(an(e,typeof t!="symbol"?t+"":t,r),r),sn=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(sn||{});let ln={0(e,t){let r=t.id,n=e.stack,a=e.stack.indexOf(r);if(a!==-1){let l=e.stack.slice();return l.splice(a,1),l.push(r),n=l,{...e,stack:n}}return{...e,stack:[...e.stack,r]}},1(e,t){let r=t.id,n=e.stack.indexOf(r);if(n===-1)return e;let a=e.stack.slice();return a.splice(n,1),{...e,stack:a}}},on=class Mt extends rn{constructor(){super(...arguments),ft(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),ft(this,"selectors",{isTop:(t,r)=>t.stack[t.stack.length-1]===r,inStack:(t,r)=>t.stack.includes(r)})}static new(){return new Mt({stack:[]})}reduce(t,r){return W(r.type,ln,t,r)}};const Bt=new It(()=>on.new());var zt={exports:{}},Kt={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xe=c;function un(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:un,dn=xe.useSyncExternalStore,mn=xe.useRef,fn=xe.useEffect,hn=xe.useMemo,pn=xe.useDebugValue;Kt.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var l=mn(null);if(l.current===null){var u={hasValue:!1,value:null};l.current=u}else u=l.current;l=hn(function(){function i(d){if(!m){if(m=!0,f=d,d=n(d),a!==void 0&&u.hasValue){var g=u.value;if(a(g,d))return h=g}return h=d}if(g=h,cn(f,d))return g;var v=n(d);return a!==void 0&&a(g,v)?(f=d,g):(f=d,h=v)}var m=!1,f,h,p=r===void 0?null:r;return[function(){return i(t())},p===null?void 0:function(){return i(p())}]},[t,r,n,a]);var o=dn(e,l[0],l[1]);return fn(function(){u.hasValue=!0,u.value=o},[o]),pn(o),o};zt.exports=Kt;var gn=zt.exports;function Ht(e,t,r=Lt){return gn.useSyncExternalStoreWithSelector(k(n=>e.subscribe(bn,n)),k(()=>e.state),k(()=>e.state),k(t),r)}function bn(e){return e}function ve(e,t){let r=c.useId(),n=Bt.get(t),[a,l]=Ht(n,c.useCallback(u=>[n.selectors.isTop(u,r),n.selectors.inStack(u,r)],[n,r]));return P(()=>{if(e)return n.actions.push(r),()=>n.actions.pop(r)},[n,e,r]),e?l?a:!0:!1}let Qe=new Map,ge=new Map;function ht(e){var t;let r=(t=ge.get(e))!=null?t:0;return ge.set(e,r+1),r!==0?()=>pt(e):(Qe.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>pt(e))}function pt(e){var t;let r=(t=ge.get(e))!=null?t:1;if(r===1?ge.delete(e):ge.set(e,r-1),r!==1)return;let n=Qe.get(e);n&&(n["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",n["aria-hidden"]),e.inert=n.inert,Qe.delete(e))}function xn(e,{allowed:t,disallowed:r}={}){let n=ve(e,"inert-others");P(()=>{var a,l;if(!n)return;let u=q();for(let i of(a=r==null?void 0:r())!=null?a:[])i&&u.add(ht(i));let o=(l=t==null?void 0:t())!=null?l:[];for(let i of o){if(!i)continue;let m=Ae(i);if(!m)continue;let f=i.parentElement;for(;f&&f!==m.body;){for(let h of f.children)o.some(p=>h.contains(p))||u.add(ht(h));f=f.parentElement}}return u.dispose},[n,t,r])}function vn(e,t,r){let n=le(a=>{let l=a.getBoundingClientRect();l.x===0&&l.y===0&&l.width===0&&l.height===0&&r()});c.useEffect(()=>{if(!e)return;let a=t===null?null:se(t)?t:t.current;if(!a)return;let l=q();if(typeof ResizeObserver<"u"){let u=new ResizeObserver(()=>n.current(a));u.observe(a),l.add(()=>u.disconnect())}if(typeof IntersectionObserver<"u"){let u=new IntersectionObserver(()=>n.current(a));u.observe(a),l.add(()=>u.disconnect())}return()=>l.dispose()},[t,n,e])}let Fe=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),yn=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var U=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(U||{}),et=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(et||{}),wn=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(wn||{});function kn(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Fe)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function jn(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(yn)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var Vt=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Vt||{});function Nn(e,t=0){var r;return e===((r=Ae(e))==null?void 0:r.body)?!1:W(t,{0(){return e.matches(Fe)},1(){let n=e;for(;n!==null;){if(n.matches(Fe))return!0;n=n.parentElement}return!1}})}var En=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(En||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function D(e){e==null||e.focus({preventScroll:!0})}let $n=["textarea","input"].join(",");function Sn(e){var t,r;return(r=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,$n))!=null?r:!1}function Pn(e,t=r=>r){return e.slice().sort((r,n)=>{let a=t(r),l=t(n);if(a===null||l===null)return 0;let u=a.compareDocumentPosition(l);return u&Node.DOCUMENT_POSITION_FOLLOWING?-1:u&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function be(e,t,{sorted:r=!0,relativeTo:n=null,skipElements:a=[]}={}){let l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,u=Array.isArray(e)?r?Pn(e):e:t&64?jn(e):kn(e);a.length>0&&u.length>1&&(u=u.filter(d=>!a.some(g=>g!=null&&"current"in g?(g==null?void 0:g.current)===d:g===d))),n=n??l.activeElement;let o=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),i=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,u.indexOf(n))-1;if(t&4)return Math.max(0,u.indexOf(n))+1;if(t&8)return u.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=t&32?{preventScroll:!0}:{},f=0,h=u.length,p;do{if(f>=h||f+h<=0)return 0;let d=i+f;if(t&16)d=(d+h)%h;else{if(d<0)return 3;if(d>=h)return 1}p=u[d],p==null||p.focus(m),f+=o}while(p!==l.activeElement);return t&6&&Sn(p)&&p.select(),2}function Ut(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Cn(){return/Android/gi.test(window.navigator.userAgent)}function gt(){return Ut()||Cn()}function $e(e,t,r,n){let a=le(r);c.useEffect(()=>{if(!e)return;function l(u){a.current(u)}return document.addEventListener(t,l,n),()=>document.removeEventListener(t,l,n)},[e,t,n])}function Dt(e,t,r,n){let a=le(r);c.useEffect(()=>{if(!e)return;function l(u){a.current(u)}return window.addEventListener(t,l,n),()=>window.removeEventListener(t,l,n)},[e,t,n])}const bt=30;function Fn(e,t,r){let n=le(r),a=c.useCallback(function(o,i){if(o.defaultPrevented)return;let m=i(o);if(m===null||!m.getRootNode().contains(m)||!m.isConnected)return;let f=function h(p){return typeof p=="function"?h(p()):Array.isArray(p)||p instanceof Set?p:[p]}(t);for(let h of f)if(h!==null&&(h.contains(m)||o.composed&&o.composedPath().includes(h)))return;return!Nn(m,Vt.Loose)&&m.tabIndex!==-1&&o.preventDefault(),n.current(o,m)},[n,t]),l=c.useRef(null);$e(e,"pointerdown",o=>{var i,m;gt()||(l.current=((m=(i=o.composedPath)==null?void 0:i.call(o))==null?void 0:m[0])||o.target)},!0),$e(e,"pointerup",o=>{if(gt()||!l.current)return;let i=l.current;return l.current=null,a(o,()=>i)},!0);let u=c.useRef({x:0,y:0});$e(e,"touchstart",o=>{u.current.x=o.touches[0].clientX,u.current.y=o.touches[0].clientY},!0),$e(e,"touchend",o=>{let i={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(i.x-u.current.x)>=bt||Math.abs(i.y-u.current.y)>=bt))return a(o,()=>Z(o.target)?o.target:null)},!0),Dt(e,"blur",o=>a(o,()=>Vr(window.document.activeElement)?window.document.activeElement:null),!0)}function Oe(...e){return c.useMemo(()=>Ae(...e),[...e])}function Wt(e,t,r,n){let a=le(r);c.useEffect(()=>{e=e??window;function l(u){a.current(u)}return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)},[e,t,n])}function _n(e){return c.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function An(e,t){let r=e(),n=new Set;return{getSnapshot(){return r},subscribe(a){return n.add(a),()=>n.delete(a)},dispatch(a,...l){let u=t[a].call(r,...l);u&&(r=u,n.forEach(o=>o()))}}}function Tn(){let e;return{before({doc:t}){var r;let n=t.documentElement,a=(r=t.defaultView)!=null?r:window;e=Math.max(0,a.innerWidth-n.clientWidth)},after({doc:t,d:r}){let n=t.documentElement,a=Math.max(0,n.clientWidth-n.offsetWidth),l=Math.max(0,e-a);r.style(n,"paddingRight",`${l}px`)}}}function On(){return Ut()?{before({doc:e,d:t,meta:r}){function n(a){return r.containers.flatMap(l=>l()).some(l=>l.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let o=q();o.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>o.dispose()))}let l=(a=window.scrollY)!=null?a:window.pageYOffset,u=null;t.addEventListener(e,"click",o=>{if(Z(o.target))try{let i=o.target.closest("a");if(!i)return;let{hash:m}=new URL(i.href),f=e.querySelector(m);Z(f)&&!n(f)&&(u=f)}catch{}},!0),t.addEventListener(e,"touchstart",o=>{if(Z(o.target)&&Hr(o.target))if(n(o.target)){let i=o.target;for(;i.parentElement&&n(i.parentElement);)i=i.parentElement;t.style(i,"overscrollBehavior","contain")}else t.style(o.target,"touchAction","none")}),t.addEventListener(e,"touchmove",o=>{if(Z(o.target)){if(Ur(o.target))return;if(n(o.target)){let i=o.target;for(;i.parentElement&&i.dataset.headlessuiPortal!==""&&!(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth);)i=i.parentElement;i.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),t.add(()=>{var o;let i=(o=window.scrollY)!=null?o:window.pageYOffset;l!==i&&window.scrollTo(0,l),u&&u.isConnected&&(u.scrollIntoView({block:"nearest"}),u=null)})})}}:{}}function In(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Rn(e){let t={};for(let r of e)Object.assign(t,r(t));return t}let re=An(()=>new Map,{PUSH(e,t){var r;let n=(r=this.get(e))!=null?r:{doc:e,count:0,d:q(),meta:new Set};return n.count++,n.meta.add(t),this.set(e,n),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:r}){let n={doc:e,d:t,meta:Rn(r)},a=[On(),Tn(),In()];a.forEach(({before:l})=>l==null?void 0:l(n)),a.forEach(({after:l})=>l==null?void 0:l(n))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});re.subscribe(()=>{let e=re.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let n=t.get(r.doc)==="hidden",a=r.count!==0;(a&&!n||!a&&n)&&re.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&re.dispatch("TEARDOWN",r)}});function Ln(e,t,r=()=>({containers:[]})){let n=_n(re),a=t?n.get(t):void 0,l=a?a.count>0:!1;return P(()=>{if(!(!t||!e))return re.dispatch("PUSH",t,r),()=>re.dispatch("POP",t,r)},[e,t]),l}function Mn(e,t,r=()=>[document.body]){let n=ve(e,"scroll-lock");Ln(n,t,a=>{var l;return{containers:[...(l=a.containers)!=null?l:[],r]}})}function Bn(e=0){let[t,r]=c.useState(e),n=c.useCallback(i=>r(i),[t]),a=c.useCallback(i=>r(m=>m|i),[t]),l=c.useCallback(i=>(t&i)===i,[t]),u=c.useCallback(i=>r(m=>m&~i),[r]),o=c.useCallback(i=>r(m=>m^i),[r]);return{flags:t,setFlag:n,addFlag:a,hasFlag:l,removeFlag:u,toggleFlag:o}}var zn={},xt,vt;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((xt=process==null?void 0:zn)==null?void 0:xt.NODE_ENV)==="test"&&typeof((vt=Element==null?void 0:Element.prototype)==null?void 0:vt.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Kn=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Kn||{});function Hn(e){let t={};for(let r in e)e[r]===!0&&(t[`data-${r}`]="");return t}function Vn(e,t,r,n){let[a,l]=c.useState(r),{hasFlag:u,addFlag:o,removeFlag:i}=Bn(e&&a?3:0),m=c.useRef(!1),f=c.useRef(!1),h=st();return P(()=>{var p;if(e){if(r&&l(!0),!t){r&&o(3);return}return(p=n==null?void 0:n.start)==null||p.call(n,r),Un(t,{inFlight:m,prepare(){f.current?f.current=!1:f.current=m.current,m.current=!0,!f.current&&(r?(o(3),i(4)):(o(4),i(2)))},run(){f.current?r?(i(3),o(4)):(i(4),o(3)):r?i(1):o(1)},done(){var d;f.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(m.current=!1,i(7),r||l(!1),(d=n==null?void 0:n.end)==null||d.call(n,r))}})}},[e,r,t,h]),e?[a,{closed:u(1),enter:u(2),leave:u(4),transition:u(2)||u(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Un(e,{prepare:t,run:r,done:n,inFlight:a}){let l=q();return Wn(e,{prepare:t,inFlight:a}),l.nextFrame(()=>{r(),l.requestAnimationFrame(()=>{l.add(Dn(e,n))})}),l.dispose}function Dn(e,t){var r,n;let a=q();if(!e)return a.dispose;let l=!1;a.add(()=>{l=!0});let u=(n=(r=e.getAnimations)==null?void 0:r.call(e).filter(o=>o instanceof CSSTransition))!=null?n:[];return u.length===0?(t(),a.dispose):(Promise.allSettled(u.map(o=>o.finished)).then(()=>{l||t()}),a.dispose)}function Wn(e,{inFlight:t,prepare:r}){if(t!=null&&t.current){r();return}let n=e.style.transition;e.style.transition="none",r(),e.offsetHeight,e.style.transition=n}function it(e,t){let r=c.useRef([]),n=k(e);c.useEffect(()=>{let a=[...r.current];for(let[l,u]of t.entries())if(r.current[l]!==u){let o=n(t,a);return r.current=t,o}},[n,...t])}let Ie=c.createContext(null);Ie.displayName="OpenClosedContext";var B=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(B||{});function Re(){return c.useContext(Ie)}function qn({value:e,children:t}){return b.createElement(Ie.Provider,{value:e},t)}function Gn({children:e}){return b.createElement(Ie.Provider,{value:null},e)}function Yn(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Y=[];Yn(()=>{function e(t){if(!Z(t.target)||t.target===document.body||Y[0]===t.target)return;let r=t.target;r=r.closest(Fe),Y.unshift(r??t.target),Y=Y.filter(n=>n!=null&&n.isConnected),Y.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function qt(e){let t=k(e),r=c.useRef(!1);c.useEffect(()=>(r.current=!1,()=>{r.current=!0,Te(()=>{r.current&&t()})}),[t])}function Xn(){let e=typeof document>"u";return(t=>t.useSyncExternalStore)(xr)(()=>()=>{},()=>!1,()=>!e)}function ye(){let e=Xn(),[t,r]=c.useState(K.isHandoffComplete);return t&&K.isHandoffComplete===!1&&r(!1),c.useEffect(()=>{t!==!0&&r(!0)},[t]),c.useEffect(()=>K.handoff(),[]),e?!1:t}let Gt=c.createContext(!1);function Zn(){return c.useContext(Gt)}function yt(e){return b.createElement(Gt.Provider,{value:e.force},e.children)}function Jn(e){let t=Zn(),r=c.useContext(Xt),[n,a]=c.useState(()=>{var l;if(!t&&r!==null)return(l=r.current)!=null?l:null;if(K.isServer)return null;let u=e==null?void 0:e.getElementById("headlessui-portal-root");if(u)return u;if(e===null)return null;let o=e.createElement("div");return o.setAttribute("id","headlessui-portal-root"),e.body.appendChild(o)});return c.useEffect(()=>{n!==null&&(e!=null&&e.body.contains(n)||e==null||e.body.appendChild(n))},[n,e]),c.useEffect(()=>{t||r!==null&&a(r.current)},[r,a,t]),n}let Yt=c.Fragment,Qn=_(function(e,t){let{ownerDocument:r=null,...n}=e,a=c.useRef(null),l=H(Dr(d=>{a.current=d}),t),u=Oe(a),o=r??u,i=Jn(o),[m]=c.useState(()=>{var d;return K.isServer?null:(d=o==null?void 0:o.createElement("div"))!=null?d:null}),f=c.useContext(tt),h=ye();P(()=>{!i||!m||i.contains(m)||(m.setAttribute("data-headlessui-portal",""),i.appendChild(m))},[i,m]),P(()=>{if(m&&f)return f.register(m)},[f,m]),qt(()=>{var d;!i||!m||(_t(m)&&i.contains(m)&&i.removeChild(m),i.childNodes.length<=0&&((d=i.parentElement)==null||d.removeChild(i)))});let p=R();return h?!i||!m?null:vr.createPortal(p({ourProps:{ref:l},theirProps:n,slot:{},defaultTag:Yt,name:"Portal"}),m):null});function ea(e,t){let r=H(t),{enabled:n=!0,ownerDocument:a,...l}=e,u=R();return n?b.createElement(Qn,{...l,ownerDocument:a,ref:r}):u({ourProps:{ref:r},theirProps:l,slot:{},defaultTag:Yt,name:"Portal"})}let ta=c.Fragment,Xt=c.createContext(null);function ra(e,t){let{target:r,...n}=e,a={ref:H(t)},l=R();return b.createElement(Xt.Provider,{value:r},l({ourProps:a,theirProps:n,defaultTag:ta,name:"Popover.Group"}))}let tt=c.createContext(null);function na(){let e=c.useContext(tt),t=c.useRef([]),r=k(l=>(t.current.push(l),e&&e.register(l),()=>n(l))),n=k(l=>{let u=t.current.indexOf(l);u!==-1&&t.current.splice(u,1),e&&e.unregister(l)}),a=c.useMemo(()=>({register:r,unregister:n,portals:t}),[r,n,t]);return[t,c.useMemo(()=>function({children:l}){return b.createElement(tt.Provider,{value:a},l)},[a])]}let aa=_(ea),Zt=_(ra),sa=Object.assign(aa,{Group:Zt});function la(e,t=typeof document<"u"?document.defaultView:null,r){let n=ve(e,"escape");Wt(t,"keydown",a=>{n&&(a.defaultPrevented||a.key===Ot.Escape&&r(a))})}function ia(){var e;let[t]=c.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[r,n]=c.useState((e=t==null?void 0:t.matches)!=null?e:!1);return P(()=>{if(!t)return;function a(l){n(l.matches)}return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[t]),r}function oa({defaultContainers:e=[],portals:t,mainTreeNode:r}={}){let n=Oe(r),a=k(()=>{var l,u;let o=[];for(let i of e)i!==null&&(J(i)?o.push(i):"current"in i&&J(i.current)&&o.push(i.current));if(t!=null&&t.current)for(let i of t.current)o.push(i);for(let i of(l=n==null?void 0:n.querySelectorAll("html > *, body > *"))!=null?l:[])i!==document.body&&i!==document.head&&J(i)&&i.id!=="headlessui-portal-root"&&(r&&(i.contains(r)||i.contains((u=r==null?void 0:r.getRootNode())==null?void 0:u.host))||o.some(m=>i.contains(m))||o.push(i));return o});return{resolveContainers:a,contains:k(l=>a().some(u=>u.contains(l)))}}let Jt=c.createContext(null);function wt({children:e,node:t}){let[r,n]=c.useState(null),a=Qt(t??r);return b.createElement(Jt.Provider,{value:a},e,a===null&&b.createElement(Je,{features:Ce.Hidden,ref:l=>{var u,o;if(l){for(let i of(o=(u=Ae(l))==null?void 0:u.querySelectorAll("html > *, body > *"))!=null?o:[])if(i!==document.body&&i!==document.head&&J(i)&&i!=null&&i.contains(l)){n(i);break}}}}))}function Qt(e=null){var t;return(t=c.useContext(Jt))!=null?t:e}function ot(){let e=c.useRef(!1);return P(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var pe=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(pe||{});function ua(){let e=c.useRef(0);return Dt(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function er(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let r of e.current)J(r.current)&&t.add(r.current);return t}let ca="div";var te=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(te||{});function da(e,t){let r=c.useRef(null),n=H(r,t),{initialFocus:a,initialFocusFallback:l,containers:u,features:o=15,...i}=e;ye()||(o=0);let m=Oe(r);pa(o,{ownerDocument:m});let f=ga(o,{ownerDocument:m,container:r,initialFocus:a,initialFocusFallback:l});ba(o,{ownerDocument:m,container:r,containers:u,previousActiveElement:f});let h=ua(),p=k(N=>{if(!se(r.current))return;let j=r.current;(E=>E())(()=>{W(h.current,{[pe.Forwards]:()=>{be(j,U.First,{skipElements:[N.relatedTarget,l]})},[pe.Backwards]:()=>{be(j,U.Last,{skipElements:[N.relatedTarget,l]})}})})}),d=ve(!!(o&2),"focus-trap#tab-lock"),g=st(),v=c.useRef(!1),x={ref:n,onKeyDown(N){N.key=="Tab"&&(v.current=!0,g.requestAnimationFrame(()=>{v.current=!1}))},onBlur(N){if(!(o&4))return;let j=er(u);se(r.current)&&j.add(r.current);let E=N.relatedTarget;Z(E)&&E.dataset.headlessuiFocusGuard!=="true"&&(tr(j,E)||(v.current?be(r.current,W(h.current,{[pe.Forwards]:()=>U.Next,[pe.Backwards]:()=>U.Previous})|U.WrapAround,{relativeTo:N.target}):Z(N.target)&&D(N.target)))}},y=R();return b.createElement(b.Fragment,null,d&&b.createElement(Je,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Ce.Focusable}),y({ourProps:x,theirProps:i,defaultTag:ca,name:"FocusTrap"}),d&&b.createElement(Je,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Ce.Focusable}))}let ma=_(da),fa=Object.assign(ma,{features:te});function ha(e=!0){let t=c.useRef(Y.slice());return it(([r],[n])=>{n===!0&&r===!1&&Te(()=>{t.current.splice(0)}),n===!1&&r===!0&&(t.current=Y.slice())},[e,Y,t]),k(()=>{var r;return(r=t.current.find(n=>n!=null&&n.isConnected))!=null?r:null})}function pa(e,{ownerDocument:t}){let r=!!(e&8),n=ha(r);it(()=>{r||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&D(n())},[r]),qt(()=>{r&&D(n())})}function ga(e,{ownerDocument:t,container:r,initialFocus:n,initialFocusFallback:a}){let l=c.useRef(null),u=ve(!!(e&1),"focus-trap#initial-focus"),o=ot();return it(()=>{if(e===0)return;if(!u){a!=null&&a.current&&D(a.current);return}let i=r.current;i&&Te(()=>{if(!o.current)return;let m=t==null?void 0:t.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===m){l.current=m;return}}else if(i.contains(m)){l.current=m;return}if(n!=null&&n.current)D(n.current);else{if(e&16){if(be(i,U.First|U.AutoFocus)!==et.Error)return}else if(be(i,U.First)!==et.Error)return;if(a!=null&&a.current&&(D(a.current),(t==null?void 0:t.activeElement)===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}l.current=t==null?void 0:t.activeElement})},[a,u,e]),l}function ba(e,{ownerDocument:t,container:r,containers:n,previousActiveElement:a}){let l=ot(),u=!!(e&4);Wt(t==null?void 0:t.defaultView,"focus",o=>{if(!u||!l.current)return;let i=er(n);se(r.current)&&i.add(r.current);let m=a.current;if(!m)return;let f=o.target;se(f)?tr(i,f)?(a.current=f,D(f)):(o.preventDefault(),o.stopPropagation(),D(m)):D(a.current)},!0)}function tr(e,t){for(let r of e)if(r.contains(t))return!0;return!1}function rr(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:ar)!==c.Fragment||b.Children.count(e.children)===1}let Le=c.createContext(null);Le.displayName="TransitionContext";var xa=(e=>(e.Visible="visible",e.Hidden="hidden",e))(xa||{});function va(){let e=c.useContext(Le);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function ya(){let e=c.useContext(Me);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Me=c.createContext(null);Me.displayName="NestingContext";function Be(e){return"children"in e?Be(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function nr(e,t){let r=le(e),n=c.useRef([]),a=ot(),l=st(),u=k((d,g=X.Hidden)=>{let v=n.current.findIndex(({el:x})=>x===d);v!==-1&&(W(g,{[X.Unmount](){n.current.splice(v,1)},[X.Hidden](){n.current[v].state="hidden"}}),l.microTask(()=>{var x;!Be(n)&&a.current&&((x=r.current)==null||x.call(r))}))}),o=k(d=>{let g=n.current.find(({el:v})=>v===d);return g?g.state!=="visible"&&(g.state="visible"):n.current.push({el:d,state:"visible"}),()=>u(d,X.Unmount)}),i=c.useRef([]),m=c.useRef(Promise.resolve()),f=c.useRef({enter:[],leave:[]}),h=k((d,g,v)=>{i.current.splice(0),t&&(t.chains.current[g]=t.chains.current[g].filter(([x])=>x!==d)),t==null||t.chains.current[g].push([d,new Promise(x=>{i.current.push(x)})]),t==null||t.chains.current[g].push([d,new Promise(x=>{Promise.all(f.current[g].map(([y,N])=>N)).then(()=>x())})]),g==="enter"?m.current=m.current.then(()=>t==null?void 0:t.wait.current).then(()=>v(g)):v(g)}),p=k((d,g,v)=>{Promise.all(f.current[g].splice(0).map(([x,y])=>y)).then(()=>{var x;(x=i.current.shift())==null||x()}).then(()=>v(g))});return c.useMemo(()=>({children:n,register:o,unregister:u,onStart:h,onStop:p,wait:m,chains:f}),[o,u,n,h,p,f,m])}let ar=c.Fragment,sr=Pe.RenderStrategy;function wa(e,t){var r,n;let{transition:a=!0,beforeEnter:l,afterEnter:u,beforeLeave:o,afterLeave:i,enter:m,enterFrom:f,enterTo:h,entered:p,leave:d,leaveFrom:g,leaveTo:v,...x}=e,[y,N]=c.useState(null),j=c.useRef(null),E=rr(e),T=H(...E?[j,t,N]:t===null?[]:[t]),L=(r=x.unmount)==null||r?X.Unmount:X.Hidden,{show:F,appear:ie,initial:M}=va(),[S,V]=c.useState(F?"visible":"hidden"),Q=ya(),{register:A,unregister:$}=Q;P(()=>A(j),[A,j]),P(()=>{if(L===X.Hidden&&j.current){if(F&&S!=="visible"){V("visible");return}return W(S,{hidden:()=>$(j),visible:()=>A(j)})}},[S,j,A,$,F,L]);let O=ye();P(()=>{if(E&&O&&S==="visible"&&j.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[j,S,O,E]);let ce=M&&!ie,we=ie&&F&&M,oe=c.useRef(!1),ue=nr(()=>{oe.current||(V("hidden"),$(j))},Q),ke=k(He=>{oe.current=!0;let Ne=He?"enter":"leave";ue.onStart(j,Ne,me=>{me==="enter"?l==null||l():me==="leave"&&(o==null||o())})}),G=k(He=>{let Ne=He?"enter":"leave";oe.current=!1,ue.onStop(j,Ne,me=>{me==="enter"?u==null||u():me==="leave"&&(i==null||i())}),Ne==="leave"&&!Be(ue)&&(V("hidden"),$(j))});c.useEffect(()=>{E&&a||(ke(F),G(F))},[F,E,a]);let Ke=!(!a||!E||!O||ce),[,w]=Vn(Ke,y,F,{start:ke,end:G}),je=ee({ref:T,className:((n=Ze(x.className,we&&m,we&&f,w.enter&&m,w.enter&&w.closed&&f,w.enter&&!w.closed&&h,w.leave&&d,w.leave&&!w.closed&&g,w.leave&&w.closed&&v,!w.transition&&F&&p))==null?void 0:n.trim())||void 0,...Hn(w)}),de=0;S==="visible"&&(de|=B.Open),S==="hidden"&&(de|=B.Closed),F&&S==="hidden"&&(de|=B.Opening),!F&&S==="visible"&&(de|=B.Closing);let ir=R();return b.createElement(Me.Provider,{value:ue},b.createElement(qn,{value:de},ir({ourProps:je,theirProps:x,defaultTag:ar,features:sr,visible:S==="visible",name:"Transition.Child"})))}function ka(e,t){let{show:r,appear:n=!1,unmount:a=!0,...l}=e,u=c.useRef(null),o=rr(e),i=H(...o?[u,t]:t===null?[]:[t]);ye();let m=Re();if(r===void 0&&m!==null&&(r=(m&B.Open)===B.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[f,h]=c.useState(r?"visible":"hidden"),p=nr(()=>{r||h("hidden")}),[d,g]=c.useState(!0),v=c.useRef([r]);P(()=>{d!==!1&&v.current[v.current.length-1]!==r&&(v.current.push(r),g(!1))},[v,r]);let x=c.useMemo(()=>({show:r,appear:n,initial:d}),[r,n,d]);P(()=>{r?h("visible"):!Be(p)&&u.current!==null&&h("hidden")},[r,p]);let y={unmount:a},N=k(()=>{var T;d&&g(!1),(T=e.beforeEnter)==null||T.call(e)}),j=k(()=>{var T;d&&g(!1),(T=e.beforeLeave)==null||T.call(e)}),E=R();return b.createElement(Me.Provider,{value:p},b.createElement(Le.Provider,{value:x},E({ourProps:{...y,as:c.Fragment,children:b.createElement(lr,{ref:i,...y,...l,beforeEnter:N,beforeLeave:j})},theirProps:{},defaultTag:c.Fragment,features:sr,visible:f==="visible",name:"Transition"})))}function ja(e,t){let r=c.useContext(Le)!==null,n=Re()!==null;return b.createElement(b.Fragment,null,!r&&n?b.createElement(rt,{ref:t,...e}):b.createElement(lr,{ref:t,...e}))}let rt=_(ka),lr=_(wa),ut=_(ja),Se=Object.assign(rt,{Child:ut,Root:rt});var Na=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Na||{}),Ea=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Ea||{});let $a={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},ct=c.createContext(null);ct.displayName="DialogContext";function ze(e){let t=c.useContext(ct);if(t===null){let r=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ze),r}return t}function Sa(e,t){return W(t.type,$a,e,t)}let kt=_(function(e,t){let r=c.useId(),{id:n=`headlessui-dialog-${r}`,open:a,onClose:l,initialFocus:u,role:o="dialog",autoFocus:i=!0,__demoMode:m=!1,unmount:f=!1,...h}=e,p=c.useRef(!1);o=function(){return o==="dialog"||o==="alertdialog"?o:(p.current||(p.current=!0,console.warn(`Invalid role [${o}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let d=Re();a===void 0&&d!==null&&(a=(d&B.Open)===B.Open);let g=c.useRef(null),v=H(g,t),x=Oe(g),y=a?0:1,[N,j]=c.useReducer(Sa,{titleId:null,descriptionId:null,panelRef:c.createRef()}),E=k(()=>l(!1)),T=k(w=>j({type:0,id:w})),L=ye()?y===0:!1,[F,ie]=na(),M={get current(){var w;return(w=N.panelRef.current)!=null?w:g.current}},S=Qt(),{resolveContainers:V}=oa({mainTreeNode:S,portals:F,defaultContainers:[M]}),Q=d!==null?(d&B.Closing)===B.Closing:!1;xn(m||Q?!1:L,{allowed:k(()=>{var w,je;return[(je=(w=g.current)==null?void 0:w.closest("[data-headlessui-portal]"))!=null?je:null]}),disallowed:k(()=>{var w;return[(w=S==null?void 0:S.closest("body > *:not(#headlessui-portal-root)"))!=null?w:null]})});let A=Bt.get(null);P(()=>{if(L)return A.actions.push(n),()=>A.actions.pop(n)},[A,n,L]);let $=Ht(A,c.useCallback(w=>A.selectors.isTop(w,n),[A,n]));Fn($,V,w=>{w.preventDefault(),E()}),la($,x==null?void 0:x.defaultView,w=>{w.preventDefault(),w.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),E()}),Mn(m||Q?!1:L,x,V),vn(L,g,E);let[O,ce]=Wr(),we=c.useMemo(()=>[{dialogState:y,close:E,setTitleId:T,unmount:f},N],[y,N,E,T,f]),oe=c.useMemo(()=>({open:y===0}),[y]),ue={ref:v,id:n,role:o,tabIndex:-1,"aria-modal":m?void 0:y===0?!0:void 0,"aria-labelledby":N.titleId,"aria-describedby":O,unmount:f},ke=!ia(),G=te.None;L&&!m&&(G|=te.RestoreFocus,G|=te.TabLock,i&&(G|=te.AutoFocus),ke&&(G|=te.InitialFocus));let Ke=R();return b.createElement(Gn,null,b.createElement(yt,{force:!0},b.createElement(sa,null,b.createElement(ct.Provider,{value:we},b.createElement(Zt,{target:g},b.createElement(yt,{force:!1},b.createElement(ce,{slot:oe},b.createElement(ie,null,b.createElement(fa,{initialFocus:u,initialFocusFallback:g,containers:V,features:G},b.createElement(Jr,{value:E},Ke({ourProps:ue,theirProps:h,slot:oe,defaultTag:Pa,features:Ca,visible:y===0,name:"Dialog"})))))))))))}),Pa="div",Ca=Pe.RenderStrategy|Pe.Static;function Fa(e,t){let{transition:r=!1,open:n,...a}=e,l=Re(),u=e.hasOwnProperty("open")||l!==null,o=e.hasOwnProperty("onClose");if(!u&&!o)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!u)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!l&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(n!==void 0||r)&&!a.static?b.createElement(wt,null,b.createElement(Se,{show:n,transition:r,unmount:a.unmount},b.createElement(kt,{ref:t,...a}))):b.createElement(wt,null,b.createElement(kt,{ref:t,open:n,...a}))}let _a="div";function Aa(e,t){let r=c.useId(),{id:n=`headlessui-dialog-panel-${r}`,transition:a=!1,...l}=e,[{dialogState:u,unmount:o},i]=ze("Dialog.Panel"),m=H(t,i.panelRef),f=c.useMemo(()=>({open:u===0}),[u]),h=k(x=>{x.stopPropagation()}),p={ref:m,id:n,onClick:h},d=a?ut:c.Fragment,g=a?{unmount:o}:{},v=R();return b.createElement(d,{...g},v({ourProps:p,theirProps:l,slot:f,defaultTag:_a,name:"Dialog.Panel"}))}let Ta="div";function Oa(e,t){let{transition:r=!1,...n}=e,[{dialogState:a,unmount:l}]=ze("Dialog.Backdrop"),u=c.useMemo(()=>({open:a===0}),[a]),o={ref:t,"aria-hidden":!0},i=r?ut:c.Fragment,m=r?{unmount:l}:{},f=R();return b.createElement(i,{...m},f({ourProps:o,theirProps:n,slot:u,defaultTag:Ta,name:"Dialog.Backdrop"}))}let Ia="h2";function Ra(e,t){let r=c.useId(),{id:n=`headlessui-dialog-title-${r}`,...a}=e,[{dialogState:l,setTitleId:u}]=ze("Dialog.Title"),o=H(t);c.useEffect(()=>(u(n),()=>u(null)),[n,u]);let i=c.useMemo(()=>({open:l===0}),[l]),m={ref:o,id:n};return R()({ourProps:m,theirProps:a,slot:i,defaultTag:Ia,name:"Dialog.Title"})}let La=_(Fa),Ma=_(Aa);_(Oa);let Ba=_(Ra),Ge=Object.assign(La,{Panel:Ma,Title:Ba,Description:Xr});const za=({isOpen:e,onClose:t,onPasswordChange:r})=>{const{colors:n}=_e(),[a,l]=c.useState(""),[u,o]=c.useState(""),[i,m]=c.useState(""),[f,h]=c.useState(""),[p,d]=c.useState(!1),g=()=>{l(""),o(""),m(""),h("")},v=()=>{g(),t()},x=async()=>{if(h(""),!a||!u||!i){h("Bitte alle Felder ausf√ºllen");return}if(u!==i){h("Die neuen Passw√∂rter stimmen nicht √ºberein");return}if(u.length<8){h("Das neue Passwort muss mindestens 8 Zeichen lang sein");return}d(!0);try{await r(a,u),v()}catch(y){console.error("Error changing password:",y),h("Fehler beim √Ñndern des Passworts. Bitte √ºberpr√ºfen Sie Ihr aktuelles Passwort.")}finally{d(!1)}};return s.jsx(Se,{show:e,as:c.Fragment,children:s.jsxs(Ge,{as:"div",className:"relative z-50",onClose:v,children:[s.jsx(Se.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity dark:bg-gray-900 dark:bg-opacity-80"})}),s.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:s.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:s.jsx(Se.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:s.jsxs(Ge.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md sm:p-6",children:[s.jsx("div",{className:"mb-4",children:s.jsxs(Ge.Title,{className:"text-lg font-app font-app-medium text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(Xe,{className:"text-accent",size:18}),"Passwort √§ndern"]})}),s.jsxs("div",{className:"space-y-4 py-4",children:[f&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-3 rounded-md text-sm flex items-start gap-2",children:[s.jsx(jt,{className:"mt-0.5 flex-shrink-0"}),s.jsx("span",{children:f})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"current-password",className:"block text-sm font-app text-gray-700 dark:text-gray-300",children:"Aktuelles Passwort"}),s.jsx(C,{id:"current-password",type:"password",value:a,onChange:y=>l(y.target.value),placeholder:"Ihr aktuelles Passwort",className:"w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"new-password",className:"block text-sm font-app text-gray-700 dark:text-gray-300",children:"Neues Passwort"}),s.jsx(C,{id:"new-password",type:"password",value:u,onChange:y=>o(y.target.value),placeholder:"Mindestens 8 Zeichen",className:"w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-app text-gray-700 dark:text-gray-300",children:"Neues Passwort best√§tigen"}),s.jsx(C,{id:"confirm-password",type:"password",value:i,onChange:y=>m(y.target.value),placeholder:"Passwort wiederholen",className:"w-full"})]})]}),s.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-between sm:space-x-2 mt-5",children:[s.jsx(ne,{type:"button",variant:"outline",leftIcon:s.jsx(St,{size:16}),onClick:v,className:"mt-2 sm:mt-0",children:"Abbrechen"}),s.jsx(ne,{type:"button",variant:"primary",leftIcon:p?s.jsx(Pt,{size:"sm"}):s.jsx(Xe,{size:16}),onClick:x,disabled:p,children:p?"Wird ge√§ndert...":"Passwort √§ndern"})]})]})})})})]})})},Ka=[{value:"",label:"Bitte ausw√§hlen"},{value:"TK",label:"Techniker Krankenkasse (TK)"},{value:"AOK",label:"Allgemeine Ortskrankenkasse (AOK)"},{value:"Barmer",label:"Barmer"},{value:"DAK",label:"DAK-Gesundheit"},{value:"KKH",label:"Kaufm√§nnische Krankenkasse (KKH)"},{value:"IKK",label:"Innungskrankenkasse (IKK)"},{value:"HEK",label:"Hanseatische Krankenkasse (HEK)"},{value:"Knappschaft",label:"Knappschaft"},{value:"BKK",label:"Betriebskrankenkasse (BKK)"},{value:"Other",label:"Andere"}],Xa=()=>{const{user:e,profile:t,refreshProfile:r}=$t(),[n,a]=c.useState(!1),[l,u]=c.useState("personal"),[o,i]=c.useState(!1),[m,f]=c.useState(!1),[h,p]=c.useState(!1),{profileData:d,loading:g,error:v,fetchProfileData:x,updateProfile:y,updatePassword:N}=Ct();c.useEffect(()=>{t&&!n&&(console.log("üîÑ Profile page: Monitoring profile changes for KYC updates"),x(!0),r())},[t==null?void 0:t.kyc_status,t==null?void 0:t.updated_at,x,r,n]),c.useEffect(()=>{const $=setInterval(()=>{!document.hidden&&!n&&(console.log("üîÑ Profile page: Periodic refresh check"),x(!0),r())},3e4);return()=>clearInterval($)},[x,r,n]);const{settings:j}=_e(),T=Ye(d,j).isApproved,L=(d==null?void 0:d.role)==="admin",ie=new Date().toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),M=yr({defaultValues:{first_name:"",last_name:"",date_of_birth:"",nationality:"DE",street:"",postal_code:"",city:"",tax_number:"",social_security_number:"",health_insurance:"",iban:"",bic:"",recipient_name:""}}),S=()=>{x(!0),Ve.success("Aktualisiere Profildaten...")};c.useEffect(()=>{if(d&&!n){const $={first_name:d.first_name||"",last_name:d.last_name||"",date_of_birth:d.date_of_birth?new Date(d.date_of_birth).toISOString().split("T")[0]:"",nationality:d.nationality||"DE",street:d.street||"",postal_code:d.postal_code||"",city:d.city||"",tax_number:d.tax_number||"",social_security_number:d.social_security_number||"",health_insurance:d.health_insurance||"",iban:d.iban||"",bic:d.bic||"",recipient_name:d.recipient_name||""};M.reset($)}},[d,n,M.reset]),c.useEffect(()=>{if(n&&d&&!h){const $={first_name:d.first_name||"",last_name:d.last_name||"",date_of_birth:d.date_of_birth?new Date(d.date_of_birth).toISOString().split("T")[0]:"",nationality:d.nationality||"DE",street:d.street||"",postal_code:d.postal_code||"",city:d.city||"",tax_number:d.tax_number||"",social_security_number:d.social_security_number||"",health_insurance:d.health_insurance||"",iban:d.iban||"",bic:d.bic||"",recipient_name:d.recipient_name||""};M.reset($),p(!0)}!n&&h&&p(!1)},[n,d,h,M.reset]);const V=async $=>{try{f(!0),console.log("Profile form submission started with data:",$);const O=await y($);O?(console.log("Profile update successful, result:",O),a(!1),p(!1)):console.error("Profile update returned null result")}catch(O){console.error("Error in form submission:",O)}finally{f(!1)}},Q=()=>{d&&M.reset({first_name:d.first_name||"",last_name:d.last_name||"",date_of_birth:d.date_of_birth?new Date(d.date_of_birth).toISOString().split("T")[0]:"",nationality:d.nationality||"DE",street:d.street||"",postal_code:d.postal_code||"",city:d.city||"",tax_number:d.tax_number||"",social_security_number:d.social_security_number||"",health_insurance:d.health_insurance||"",iban:d.iban||"",bic:d.bic||"",recipient_name:d.recipient_name||""}),a(!1),u("personal")},A=async($,O)=>{try{await N(O),Ve.success("Passwort erfolgreich ge√§ndert")}catch(ce){console.error("Error changing password:",ce),Ve.error("Fehler beim √Ñndern des Passworts")}};return g&&!d?s.jsxs("div",{className:"space-y-8 w-full px-4 py-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:s.jsxs("div",{children:[s.jsx("div",{className:"h-8 w-64 bg-gray-200 dark:bg-gray-700 rounded mb-2 animate-pulse"}),s.jsx("div",{className:"h-4 w-96 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})})}),s.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-center py-12",children:s.jsx(Pt,{size:"lg"})})]}):v?s.jsx("div",{className:"space-y-8 w-full px-4 py-6",children:s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-6 shadow-sm border border-red-100 dark:border-red-800/30 mb-6",children:[s.jsx("h2",{className:"text-lg font-medium text-red-800 dark:text-red-300",children:"Fehler beim Laden der Profildaten"}),s.jsx("p",{className:"mt-2 text-red-700 dark:text-red-400",children:"Es ist ein Fehler aufgetreten. Bitte versuchen Sie es sp√§ter erneut."}),s.jsx("button",{onClick:S,className:"mt-4 px-4 py-2 bg-red-100 dark:bg-red-800/30 text-red-700 dark:text-red-300 rounded-md hover:bg-red-200 dark:hover:bg-red-800/50 transition-colors",children:"Erneut versuchen"})]})}):s.jsxs("div",{className:"space-y-8 w-full px-4 py-6",children:[s.jsx(jr,{profileData:d,isEditing:n,isVerified:T,formattedDate:ie,onEdit:()=>a(!0),onPasswordModalOpen:()=>i(!0)}),s.jsxs(wr,{className:"shadow-sm border-0 overflow-hidden",children:[s.jsx("div",{className:"h-1 w-full bg-accent dark:bg-accent/80"}),s.jsx(Fr,{formMethods:M,isEditing:n,activeTab:l,setActiveTab:u,onSubmit:V,onCancel:Q,onPasswordModalOpen:()=>i(!0),healthInsuranceOptions:Ka,isSubmitting:m,profileData:d,isAdmin:L})]}),s.jsx(za,{isOpen:o,onClose:()=>i(!1),onPasswordChange:A})]})};export{Xa as default};
