import{$ as b,r as a,j as e,e as l,h as i,i as d,aQ as m,aP as _,H as O,L as C,m as Q,k as R,l as W,aK as Z}from"./index-C2zOcIr5.js";import{u as q}from"./useKnowledgeBase-Bsp-TrSn.js";import{M as J}from"./Modal-BgYYuuIM.js";import{u as X}from"./useToast-BsUGRjrm.js";import{U as Y}from"./upload-DWuvDsn2.js";import{S}from"./square-pen-Df1rf3Dp.js";import{T as ee}from"./trash-2-CucBzA-1.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],A=b("book-open",se);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],z=b("circle-plus",te);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ae=b("tag",re),ye=()=>{const{showToast:p}=X(),{categories:h,articles:c,searchResults:j,loading:f,searchLoading:M,searchArticles:E,createArticle:I,generateEmbeddings:T,clearSearch:K}=q(),[o,D]=a.useState(""),[u,L]=a.useState("all"),[le,y]=a.useState(null),[V,x]=a.useState(!1),[ne,B]=a.useState(!1),[ie,P]=a.useState(!1),[de,$]=a.useState(!1),[g,k]=a.useState("grid"),[r,n]=a.useState({title:"",content:"",summary:"",category_id:"",tags:[],keywords:[],is_published:!1,ai_training_enabled:!0,context_priority:5,response_template:"",conversation_examples:[]}),F=s=>{D(s),s.trim()?E(s):K()},N=u==="all"?o?j:c:(o?j:c).filter(s=>s.category_id===u),H=async()=>{try{await I(r)&&(x(!1),n({title:"",content:"",summary:"",category_id:"",tags:[],keywords:[],is_published:!1}),p({type:"success",title:"Erfolg",message:"Artikel wurde erfolgreich erstellt"}))}catch(s){console.error("Error creating article:",s)}},v=s=>{y(s),n({title:s.title,content:s.content,summary:s.summary||"",category_id:s.category_id,tags:s.tags||[],keywords:s.keywords||[],is_published:s.is_published}),B(!0)},U=s=>{y(s),P(!0)},w=s=>{y(s),$(!0)},G=async s=>{try{await T(s),p({type:"success",title:"Erfolg",message:"Embeddings wurden generiert"})}catch(t){console.error("Error generating embeddings:",t)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Wissensdatenbank"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Verwalten Sie Artikel und FAQs für den AI-Assistenten"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(l,{variant:"outline",leftIcon:e.jsx(Y,{size:16}),onClick:()=>{},children:"Importieren"}),e.jsx(l,{onClick:()=>x(!0),leftIcon:e.jsx(z,{size:16}),children:"Neuer Artikel"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(i,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(A,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Artikel gesamt"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.length})]})]})})}),e.jsx(i,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(m,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Veröffentlicht"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.filter(s=>s.is_published).length})]})]})})}),e.jsx(i,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(ae,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Kategorien"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.length})]})]})})}),e.jsx(i,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(_,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Aufrufe gesamt"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.reduce((s,t)=>s+t.view_count,0)})]})]})})})]}),e.jsx(i,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(O,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Artikel durchsuchen...",value:o,onChange:s=>F(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),M&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(C,{size:"sm"})})]}),e.jsx("div",{className:"md:w-48",children:e.jsxs("select",{value:u,onChange:s=>L(s.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"Alle Kategorien"}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsxs("div",{className:"flex rounded-lg border border-gray-300 dark:border-gray-600",children:[e.jsx("button",{onClick:()=>k("grid"),className:`px-3 py-2 text-sm rounded-l-lg transition-colors ${g==="grid"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"Grid"}),e.jsx("button",{onClick:()=>k("list"),className:`px-3 py-2 text-sm rounded-r-lg transition-colors ${g==="list"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"Liste"})]})]})})}),f?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(C,{size:"lg"})}):e.jsx("div",{className:g==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:N.map(s=>e.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:g==="grid"?"":"w-full",children:e.jsxs(i,{className:"h-full hover:shadow-lg transition-shadow duration-200",children:[e.jsx(R,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(W,{className:"text-lg text-gray-900 dark:text-white mb-2 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.is_published?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:s.is_published?"Veröffentlicht":"Entwurf"}),s.category&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",children:s.category.name})]})]}),e.jsxs("div",{className:"flex space-x-1 ml-2",children:[e.jsx("button",{onClick:()=>w(s),className:"p-1 text-gray-400 hover:text-blue-500 dark:hover:text-blue-400",title:"Vorschau",children:e.jsx(m,{size:16})}),e.jsx("button",{onClick:()=>v(s),className:"p-1 text-gray-400 hover:text-green-500 dark:hover:text-green-400",title:"Bearbeiten",children:e.jsx(S,{size:16})}),e.jsx("button",{onClick:()=>U(s),className:"p-1 text-gray-400 hover:text-red-500 dark:hover:text-red-400",title:"Löschen",children:e.jsx(ee,{size:16})})]})]})}),e.jsxs(d,{className:"pt-0",children:[s.summary&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-3",children:s.summary}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(m,{size:12}),e.jsx("span",{children:s.view_count})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(_,{size:12}),e.jsx("span",{children:s.helpful_votes})]})]}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString("de-DE")})]}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.tags.slice(0,3).map(t=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-xs",children:t},t)),s.tags.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-full text-xs",children:["+",s.tags.length-3]})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsx(l,{size:"sm",variant:"outline",onClick:()=>G(s.id),leftIcon:e.jsx(Z,{size:14}),children:"Embeddings"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>w(s),leftIcon:e.jsx(m,{size:14}),children:"Anzeigen"}),e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>v(s),leftIcon:e.jsx(S,{size:14}),children:"Bearbeiten"})]})]})]})]})},s.id))}),!f&&N.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A,{size:48,className:"text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:o?"Keine Artikel gefunden":"Noch keine Artikel"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:o?"Versuchen Sie andere Suchbegriffe oder erstellen Sie einen neuen Artikel.":"Erstellen Sie Ihren ersten Artikel für die Wissensdatenbank."}),e.jsx(l,{onClick:()=>x(!0),leftIcon:e.jsx(z,{size:16}),children:"Ersten Artikel erstellen"})]}),e.jsx(J,{isOpen:V,onClose:()=>x(!1),title:"Neuen Artikel erstellen",size:"xl",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Titel"}),e.jsx("input",{type:"text",value:r.title,onChange:s=>n(t=>({...t,title:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Artikel-Titel eingeben..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Kategorie"}),e.jsxs("select",{value:r.category_id,onChange:s=>n(t=>({...t,category_id:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Kategorie auswählen..."}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Zusammenfassung"}),e.jsx("textarea",{value:r.summary,onChange:s=>n(t=>({...t,summary:s.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Kurze Zusammenfassung für Suchergebnisse..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Inhalt"}),e.jsx("textarea",{value:r.content,onChange:s=>n(t=>({...t,content:s.target.value})),rows:12,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Artikel-Inhalt eingeben... (Markdown wird unterstützt)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_published",checked:r.is_published,onChange:s=>n(t=>({...t,is_published:s.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_published",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Sofort veröffentlichen"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(l,{variant:"outline",onClick:()=>x(!1),children:"Abbrechen"}),e.jsx(l,{onClick:H,disabled:!r.title||!r.content||!r.category_id,children:"Artikel erstellen"})]})]})})]})};export{ye as default};
