import{r as t,j as e,X as P,f as R}from"./index-C2zOcIr5.js";import{U as u}from"./upload-DWuvDsn2.js";const E=({acceptedTypes:l=["image/jpeg","image/png","image/gif","image/svg+xml"],maxSizeMB:n=5,onFileSelect:f,className:h="",label:p="Upload file",error:j,showPreview:v=!0,previewUrl:b})=>{const[y,d]=t.useState(!1),[c,x]=t.useState(b||null),[o,i]=t.useState(j||null),[N,g]=t.useState(!1),s=t.useRef(null),k=r=>{r.target.files&&r.target.files.length>0&&m(r.target.files[0])},w=r=>{r.preventDefault(),d(!1),r.dataTransfer.files&&r.dataTransfer.files.length>0&&m(r.dataTransfer.files[0])},m=r=>{if(i(null),!l.includes(r.type)){i(`Invalid file type. Accepted types: ${l.join(", ")}`);return}if(r.size>n*1024*1024){i(`File is too large. Maximum size is ${n}MB.`);return}if(v){const a=new FileReader;a.onload=()=>{x(a.result)},a.readAsDataURL(r)}g(!0);try{f(r)}catch(a){i("Failed to process file"),console.error("Error in FileUpload component:",a)}finally{g(!1)}},D=r=>{r.preventDefault(),d(!0)},U=()=>{d(!1)},F=()=>{s.current&&s.current.click()},C=()=>{x(null),s.current&&(s.current.value="")};return e.jsxs("div",{className:`w-full ${h}`,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:p}),e.jsxs("div",{className:`mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-md 
          ${y?"border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-700"} 
          ${o?"border-red-400 bg-red-50 dark:bg-red-900/20":""}
          hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors relative`,onDragOver:D,onDragLeave:U,onDrop:w,onClick:F,children:[N?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400 animate-spin",children:e.jsx(u,{className:"h-12 w-12"})}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Uploading..."})]}):c?e.jsx("div",{className:"relative w-full",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:c,alt:"Preview",className:"max-h-64 rounded"}),e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),C()},className:"absolute top-0 right-0 -mt-2 -mr-2 bg-red-500 text-white rounded-full p-1",children:e.jsx(P,{size:16})})]})})}):e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:e.jsx(u,{className:"h-12 w-12"})}),e.jsx("div",{className:"flex text-sm text-gray-600 dark:text-gray-400",children:e.jsx("p",{className:"pl-1",children:"Drag and drop a file or click to select"})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[l.join(", ")," (max. ",n,"MB)"]})]}),e.jsx("input",{ref:s,type:"file",className:"sr-only",accept:l.join(","),onChange:k})]}),o&&e.jsxs("div",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center",children:[e.jsx(R,{size:16,className:"mr-1 flex-shrink-0"}),e.jsx("span",{children:o})]})]})};export{E as F};
