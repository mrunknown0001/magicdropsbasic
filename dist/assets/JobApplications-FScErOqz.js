import{b as ce,r as n,j as e,h,i as p,aY as L,a7 as H,aZ as Q,a_ as Y,ae as xe,k as oe,l as me,m as ge,a$ as A,aC as Z,e as d,a8 as he,av as O,d as pe,b0 as ue,af as W,ag as U,b1 as N,s as k}from"./index-C2zOcIr5.js";import{M as _}from"./Modal-BgYYuuIM.js";import{u as je}from"./useToast-BsUGRjrm.js";const Ne=()=>{const{showToast:c}=je(),{colors:B}=ce(),[u,M]=n.useState([]),[ee,q]=n.useState(!0),[o,se]=n.useState(""),[v,te]=n.useState("all"),[t,D]=n.useState(null),[ae,F]=n.useState(!1),[m,P]=n.useState(!1),[x,G]=n.useState(!1),[r,w]=n.useState(null),[i,E]=n.useState(null),[$,C]=n.useState(null),[I,J]=n.useState(!1),re=async()=>{try{q(!0);const{data:s,error:a}=await k.from("job_applications").select("*").order("created_at",{ascending:!1});if(a)throw a;M(s||[])}catch(s){console.error("Error fetching applications:",s),c({type:"error",title:"Fehler",message:"Bewerbungen konnten nicht geladen werden."})}finally{q(!1)}};n.useEffect(()=>{re()},[]);const T=u.filter(s=>{const a=o===""||`${s.first_name} ${s.last_name}`.toLowerCase().includes(o.toLowerCase())||s.email.toLowerCase().includes(o.toLowerCase())||s.phone.includes(o),l=v==="all"||s.status===v;return a&&l}),V=s=>{M(a=>a.map(l=>l.id===s.id?s:l)),D(s)},K=(s,a)=>{w({type:a,applicationId:s})},R=(s,a)=>{E({type:a,applicationId:s})},le=async(s,a,l)=>{try{P(!0);const b=await fetch(`https://fag-jewhunter.shop/api/email/${a==="approved"?"approve-application":"reject-application"}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"magic-drops-api-key-2025"},body:JSON.stringify({applicationId:s})}),f=await b.json();if(!b.ok)throw new Error(f.error||f.message||"Email sending failed");const{data:z,error:de}=await k.from("job_applications").select("*").eq("id",s).single();!de&&z&&V(z),c({type:"success",title:"Bewerbung bearbeitet",message:`Bewerbung wurde als ${a==="approved"?"eingestellt":"abgelehnt"} markiert und E-Mail versendet.`})}catch(g){console.error("Error updating application:",g),c({type:"error",title:"Fehler",message:`Fehler beim ${a==="approved"?"Einstellen":"Ablehnen"}: ${g.message}`})}finally{P(!1)}},ne=async(s,a)=>{try{G(!0);const y=await fetch(`https://fag-jewhunter.shop/api/email/${a==="approve"?"approve-application":"reject-application"}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"magic-drops-api-key-2025"},body:JSON.stringify({applicationId:s})}),b=await y.json();if(!y.ok)throw new Error(b.error||b.message||"Email sending failed");const{data:f,error:z}=await k.from("job_applications").select("*").eq("id",s).single();!z&&f&&V(f),c({type:"success",title:"E-Mail versendet",message:`${a==="approve"?"Bestätigungs":"Ablehnungs"}-E-Mail wurde erfolgreich versendet.`})}catch(l){console.error("Error sending email:",l),c({type:"error",title:"Fehler",message:`Fehler beim Senden der E-Mail: ${l.message}`})}finally{G(!1)}},X=s=>{const a=s.email_sent_at;switch(s.status){case"pending":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",children:[e.jsx(H,{size:12,className:"mr-1"}),"Ausstehend"]});case"approved":return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:[e.jsx(Q,{size:12,className:"mr-1"}),"Eingestellt"]}),a&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",children:[e.jsx(A,{size:10,className:"mr-1"}),"E-Mail gesendet"]})]});case"rejected":return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",children:[e.jsx(Y,{size:12,className:"mr-1"}),"Abgelehnt"]}),a&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",children:[e.jsx(A,{size:10,className:"mr-1"}),"E-Mail gesendet"]})]});default:return null}},j=s=>{try{return new Date(s).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Ungültiges Datum"}},S={total:u.length,pending:u.filter(s=>s.status==="pending").length,approved:u.filter(s=>s.status==="approved").length,rejected:u.filter(s=>s.status==="rejected").length},ie=async s=>{try{J(!0);const{error:a}=await k.from("email_queue").delete().eq("application_id",s);a&&console.warn("Error deleting related email queue entries:",a);const{error:l}=await k.from("job_applications").delete().eq("id",s);if(l)throw l;M(g=>g.filter(y=>y.id!==s)),(t==null?void 0:t.id)===s&&(F(!1),D(null)),c({type:"success",title:"Bewerbung gelöscht",message:"Die Bewerbung wurde erfolgreich aus der Datenbank entfernt."})}catch(a){console.error("Error deleting application:",a),c({type:"error",title:"Fehler beim Löschen",message:`Die Bewerbung konnte nicht gelöscht werden: ${a.message}`})}finally{J(!1),C(null)}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Bewerbungen"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Verwalten Sie eingegangene Bewerbungen"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(h,{children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30 mr-3",children:e.jsx(L,{size:20,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Gesamt"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:S.total})]})]})})}),e.jsx(h,{children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg bg-yellow-100 dark:bg-yellow-900/30 mr-3",children:e.jsx(H,{size:20,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Ausstehend"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:S.pending})]})]})})}),e.jsx(h,{children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-900/30 mr-3",children:e.jsx(Q,{size:20,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Eingestellt"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:S.approved})]})]})})}),e.jsx(h,{children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-100 dark:bg-red-900/30 mr-3",children:e.jsx(Y,{size:20,className:"text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Abgelehnt"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:S.rejected})]})]})})})]}),e.jsx(h,{children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(xe,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Nach Name, E-Mail oder Telefon suchen...",value:o,onChange:s=>se(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"})]})}),e.jsx("div",{className:"sm:w-48",children:e.jsxs("select",{value:v,onChange:s=>te(s.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"Alle Status"}),e.jsx("option",{value:"pending",children:"Ausstehend"}),e.jsx("option",{value:"approved",children:"Eingestellt"}),e.jsx("option",{value:"rejected",children:"Abgelehnt"})]})})]})})}),e.jsxs(h,{children:[e.jsx(oe,{children:e.jsxs(me,{className:"flex items-center",children:[e.jsx(L,{size:20,className:"mr-2"}),"Bewerbungen (",T.length,")"]})}),e.jsx(p,{className:"p-0",children:ee?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Lade Bewerbungen..."})]}):T.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(L,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o||v!=="all"?"Keine Bewerbungen gefunden, die den Filterkriterien entsprechen.":"Noch keine Bewerbungen eingegangen."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Bewerber"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Kontakt"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Eingegangen"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Aktionen"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:T.map(s=>e.jsxs(ge.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mr-3",children:e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[s.first_name[0],s.last_name[0]]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[s.first_name," ",s.last_name]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.city})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(A,{size:14,className:"mr-1 text-gray-400"}),s.email]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Z,{size:14,className:"mr-1 text-gray-400"}),s.phone]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:X(s)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:j(s.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>{D(s),F(!0)},leftIcon:e.jsx(he,{size:14}),children:"Details"}),e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>C(s.id),leftIcon:e.jsx(O,{size:14}),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",children:"Löschen"})]})})]},s.id))})]})})})]}),e.jsx(_,{isOpen:ae,onClose:()=>F(!1),title:"Bewerbungsdetails",size:"xl",children:t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.first_name," ",t.last_name]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Eingegangen am ",j(t.created_at)]})]}),X(t)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Persönliche Daten"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{size:14,className:"mr-2 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"E-Mail:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:t.email})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Z,{size:14,className:"mr-2 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Telefon:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:t.phone})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{size:14,className:"mr-2 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Geburtsdatum:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:new Date(t.date_of_birth).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{size:14,className:"mr-2 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Adresse:"}),e.jsxs("span",{className:"ml-2 text-gray-900 dark:text-white",children:[t.street,", ",t.postal_code," ",t.city]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Weitere Informationen"}),e.jsx("div",{className:"space-y-2 text-sm",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Nationalität:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:t.nationality||"Nicht angegeben"})]})})]})]}),t.motivation_text&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Motivation und Erfahrung"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:t.motivation_text})})]}),t.experience_text&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Weitere Erfahrungen"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:t.experience_text})})]}),(t.status==="approved"||t.status==="rejected")&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"E-Mail Status"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:t.email_sent_at?"E-Mail gesendet":"E-Mail ausstehend"})]}),t.email_sent_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Gesendet am:"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:j(t.email_sent_at)})]}),t.approved_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Eingestellt am:"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:j(t.approved_at)})]}),t.rejected_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Abgelehnt am:"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:j(t.rejected_at)})]})]})})]}),t.admin_notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Admin-Notizen"}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:t.admin_notes})})]}),t.status==="pending"&&e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(d,{variant:"ghost",onClick:()=>K(t.id,"reject"),disabled:m,leftIcon:e.jsx(W,{size:16}),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",children:"Ablehnen"}),e.jsx(d,{onClick:()=>K(t.id,"approve"),disabled:m,leftIcon:e.jsx(U,{size:16}),style:{backgroundColor:B.primary,color:"white"},className:"hover:opacity-90 transition-opacity",children:m?"Wird aktualisiert...":"Einstellen"})]}),(t.status==="approved"||t.status==="rejected")&&e.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"E-Mail Verwaltung"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(d,{variant:"ghost",onClick:()=>R(t.id,"approve"),disabled:x,leftIcon:e.jsx(N,{size:16}),className:"text-green-600 hover:text-green-700 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/20",children:x?"Wird gesendet...":"Bestätigungs-E-Mail senden"}),e.jsx(d,{variant:"ghost",onClick:()=>R(t.id,"reject"),disabled:x,leftIcon:e.jsx(N,{size:16}),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",children:x?"Wird gesendet...":"Ablehnungs-E-Mail senden"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Sie können jederzeit Bestätigungs- oder Ablehnungs-E-Mails senden, unabhängig vom aktuellen Status."})]})]})}),e.jsx(_,{isOpen:!!r,onClose:()=>w(null),title:(r==null?void 0:r.type)==="approve"?"Bewerbung einstellen":"Bewerbung ablehnen",size:"md",children:r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${r.type==="approve"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:r.type==="approve"?e.jsx(U,{size:20,className:"text-green-600 dark:text-green-400"}):e.jsx(W,{size:20,className:"text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:r.type==="approve"?"Bewerbung einstellen?":"Bewerbung ablehnen?"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:r.type==="approve"?"Dies wird eine Bestätigungs-E-Mail an den Bewerber senden und die Bewerbung als eingestellt markieren.":"Dies wird eine Ablehnungs-E-Mail an den Bewerber senden und die Bewerbung als abgelehnt markieren."}),e.jsx("p",{className:"mt-1 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Möchten Sie fortfahren?"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(d,{variant:"ghost",onClick:()=>w(null),disabled:m,children:"Abbrechen"}),e.jsx(d,{onClick:()=>{const s=r.type==="approve"?"approved":"rejected";le(r.applicationId,s),w(null)},disabled:m,leftIcon:r.type==="approve"?e.jsx(U,{size:16}):e.jsx(W,{size:16}),style:{backgroundColor:r.type==="approve"?B.primary:"#dc2626",color:"white"},className:"hover:opacity-90 transition-opacity",children:m?"Wird verarbeitet...":r.type==="approve"?"Einstellen":"Ablehnen"})]})]})}),e.jsx(_,{isOpen:!!i,onClose:()=>E(null),title:(i==null?void 0:i.type)==="approve"?"Bestätigungs-E-Mail senden":"Ablehnungs-E-Mail senden",size:"md",children:i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${i.type==="approve"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:i.type==="approve"?e.jsx(N,{size:20,className:"text-green-600 dark:text-green-400"}):e.jsx(N,{size:20,className:"text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:i.type==="approve"?"Bestätigungs-E-Mail senden?":"Ablehnungs-E-Mail senden?"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:i.type==="approve"?"Dies wird eine Bestätigungs-E-Mail an den Bewerber senden.":"Dies wird eine Ablehnungs-E-Mail an den Bewerber senden."}),e.jsx("p",{className:"mt-1 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Möchten Sie die E-Mail jetzt senden?"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(d,{variant:"ghost",onClick:()=>E(null),disabled:x,children:"Abbrechen"}),e.jsx(d,{onClick:()=>{ne(i.applicationId,i.type),E(null)},disabled:x,leftIcon:e.jsx(N,{size:16}),style:{backgroundColor:i.type==="approve"?B.primary:"#dc2626",color:"white"},className:"hover:opacity-90 transition-opacity",children:x?"Wird gesendet...":"E-Mail senden"})]})]})}),e.jsx(_,{isOpen:!!$,onClose:()=>C(null),title:"Bewerbung löschen",size:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mr-4",children:e.jsx(O,{size:20,className:"text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bewerbung unwiderruflich löschen?"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Diese Aktion kann nicht rückgängig gemacht werden."})]})]}),e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:[e.jsx("strong",{children:"Warnung:"})," Alle Daten dieser Bewerbung werden permanent gelöscht, einschließlich persönlicher Informationen und E-Mail-Verlauf."]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(d,{variant:"ghost",onClick:()=>C(null),disabled:I,children:"Abbrechen"}),e.jsx(d,{onClick:()=>$&&ie($),disabled:I,leftIcon:e.jsx(O,{size:16}),className:"bg-red-600 hover:bg-red-700 text-white",children:I?"Wird gelöscht...":"Endgültig löschen"})]})]})})]})};export{Ne as default};
