import{G as K,b2 as L,b3 as q,r as N,j as e,e as v,h as c,k as w,l as C,i as d,L as G,H as S,v as H,m as M,F as T,W as U,B as W,D as J,c as O}from"./index-C2zOcIr5.js";import{R as Q}from"./refresh-cw-BQFYSu-c.js";import{F as V}from"./funnel-By8gi63k.js";const ee=()=>{var f,k;const R=K(),[$,E]=L(),{searchTerm:g,setSearchTerm:m,searchResults:X,categories:o,filters:z,isSearching:h,executeSearch:l,updateFilters:u,getResultsByCategory:P,getCategoryCount:A,searchHistory:p}=q(),[n,D]=N.useState("all"),s=$.get("q")||"";N.useEffect(()=>{s&&s!==g&&(m(s),l(s,n))},[s,n,g,m,l]);const b=a=>{D(a),u({category:a}),s&&l(s,a)},B=a=>{u({sortBy:a})},F=a=>{R(a.url)},x=P(n),y=a=>{switch(a){case"employee":return O;case"bankdrop":return J;case"task":return W;case"phone":return U;case"submission":return T;default:return S}},I=a=>{switch(a){case"employee":return"blue";case"bankdrop":return"green";case"task":return"purple";case"phone":return"orange";case"submission":return"indigo";default:return"gray"}},j=a=>{var t,i;const r=[];return a.createdAt&&r.push(`Erstellt: ${new Date(a.createdAt).toLocaleDateString("de-DE")}`),(t=a.metadata)!=null&&t.status&&r.push(`Status: ${a.metadata.status}`),(i=a.metadata)!=null&&i.role&&r.push(`Rolle: ${a.metadata.role==="admin"?"Administrator":"Mitarbeiter"}`),r.join(" • ")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Suchergebnisse"}),s&&e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[x.length,' Ergebnisse für "',s,'"',n!=="all"&&e.jsxs("span",{className:"text-accent",children:[" ","in ",(f=o.find(a=>a.type===n))==null?void 0:f.name]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:z.sortBy,onChange:a=>B(a.target.value),className:"px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-accent focus:border-accent",children:[e.jsx("option",{value:"relevance",children:"Relevanz"}),e.jsx("option",{value:"date",children:"Datum"}),e.jsx("option",{value:"title",children:"Titel"})]}),e.jsx(v,{variant:"outline",size:"sm",onClick:()=>l(s),disabled:h,leftIcon:e.jsx(Q,{size:16}),children:"Aktualisieren"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(c,{children:[e.jsx(w,{children:e.jsxs(C,{className:"text-lg flex items-center",children:[e.jsx(V,{className:"mr-2 h-5 w-5"}),"Kategorien"]})}),e.jsx(d,{className:"space-y-2",children:o.map(a=>{const r=y(a.type),t=A(a.type),i=n===a.type;return e.jsxs("button",{onClick:()=>b(a.type),className:`w-full flex items-center justify-between p-3 rounded-md text-left transition-colors ${i?"bg-accent/10 text-accent border-l-4 border-accent":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r,{size:18}),e.jsx("span",{className:"font-medium",children:a.name})]}),t>0&&e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${i?"bg-accent text-white":"bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300"}`,children:t})]},a.id)})})]}),p.length>0&&e.jsxs(c,{className:"mt-4",children:[e.jsx(w,{children:e.jsx(C,{className:"text-lg",children:"Suchverlauf"})}),e.jsx(d,{className:"space-y-2",children:p.slice(0,5).map((a,r)=>e.jsx("button",{onClick:()=>{const t=new URLSearchParams;t.set("q",a),E(t)},className:"w-full text-left p-2 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 text-sm text-gray-600 dark:text-gray-400 transition-colors",children:a},r))})]})]}),e.jsx("div",{className:"lg:col-span-3",children:h?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(G,{size:"lg"})}):x.length===0?e.jsx(c,{children:e.jsxs(d,{className:"text-center py-12",children:[e.jsx(S,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Keine Ergebnisse gefunden"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:s?`Keine Ergebnisse für "${s}"${n!=="all"?` in ${(k=o.find(a=>a.type===n))==null?void 0:k.name}`:""}.`:"Geben Sie einen Suchbegriff ein, um Ergebnisse zu sehen."}),e.jsx(v,{variant:"outline",onClick:()=>b("all"),className:"mr-2",children:"Alle Kategorien durchsuchen"})]})}):e.jsx("div",{className:"space-y-4",children:e.jsx(H,{children:x.map((a,r)=>{const t=I(a.type),i=y(a.type);return e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},children:e.jsx(c,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{onClick:()=>F(a),className:"flex items-start space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${t==="blue"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":t==="green"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":t==="purple"?"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300":t==="orange"?"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300":t==="indigo"?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300":"bg-gray-100 text-gray-700 dark:bg-gray-900 dark:text-gray-300"}`,children:e.jsx(i,{size:20})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:a.subtitle}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mb-3",children:a.description}),j(a)&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:j(a)})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${t==="blue"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":t==="green"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":t==="purple"?"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300":t==="orange"?"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300":t==="indigo"?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300":"bg-gray-100 text-gray-700 dark:bg-gray-900 dark:text-gray-300"}`,children:[a.relevanceScore,"% Match"]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})]})})]})})})},`${a.type}-${a.id}`)})})})})]})]})};export{ee as default};
