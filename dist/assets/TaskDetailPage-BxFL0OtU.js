import{P as j,G as k,r as p,j as e,e as n,Q as l,h as m,i as o,f as b,A as u}from"./index-C2zOcIr5.js";import{u as N}from"./useTaskAssignment-DzXizOwJ.js";import{T as w}from"./TaskDetail-CgJpSS8C.js";import{S as i}from"./ShimmerEffect-By9i5EVD.js";import"./upload-DWuvDsn2.js";import"./refresh-cw-BQFYSu-c.js";const C=()=>{const{assignmentId:t}=j(),a=k(),{taskAssignment:s,isLoading:c,error:d,restartRejectedTask:x}=N(t);p.useEffect(()=>{s&&!c&&s.video_chat_status==="completed"&&s.document_step_required===!0&&s.document_step_completed===!1&&(console.log("Video chat completed with pending document step, redirecting to flow"),a(`/task-assignments/${t}/flow`))},[s,c,t,a]);const f=()=>{t&&a(`/task-assignments/${t}/flow`)},r=()=>{a("/mitarbeiter/tasks")},g=async()=>{if(s)try{await x()&&(console.log("Task successfully restarted, navigating to My Tasks"),a("/mitarbeiter/tasks"))}catch(h){console.error("Error restarting rejected task:",h)}};return d?e.jsxs("div",{className:"p-6",children:[e.jsxs(n,{variant:"ghost",className:"mb-6",onClick:r,children:[e.jsx(l,{className:"mr-2",size:16}),"Zurück zur Übersicht"]}),e.jsx(m,{children:e.jsxs(o,{className:"flex flex-col items-center justify-center p-6",children:[e.jsx(b,{size:48,className:"text-amber-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Fehler beim Laden der Aufgabe"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:d.message||"Die Aufgabe konnte nicht geladen werden."}),e.jsx(u,{variant:"primary",size:"md",onClick:r,children:"Zurück zur Übersicht"})]})})]}):c||s&&s.video_chat_status==="completed"&&s.document_step_required===!0&&s.document_step_completed===!1?e.jsxs("div",{className:"p-6",children:[e.jsxs(n,{variant:"ghost",className:"mb-6",onClick:r,children:[e.jsx(l,{className:"mr-2",size:16}),"Zurück zur Übersicht"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{className:"h-8 w-1/3"}),e.jsx(m,{children:e.jsxs(o,{className:"p-6",children:[e.jsx(i,{className:"h-6 w-3/4 mb-4"}),e.jsx(i,{className:"h-4 w-full mb-3"}),e.jsx(i,{className:"h-4 w-full mb-3"}),e.jsx(i,{className:"h-4 w-2/3"})]})})]})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs(n,{variant:"ghost",className:"mb-6",onClick:r,children:[e.jsx(l,{className:"mr-2",size:16}),"Zurück zur Übersicht"]}),s?e.jsx(w,{taskAssignment:s,onStartTask:f,onRestartTask:g}):e.jsx(m,{children:e.jsxs(o,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aufgabe nicht gefunden"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Die angeforderte Aufgabe konnte nicht gefunden werden."}),e.jsx(u,{variant:"primary",size:"md",onClick:r,children:"Zurück zur Übersicht"})]})})]})};export{C as default};
