import{r as m,aG as J,j as e,T as Q,aH as be,aI as pe,b as fe,G as ke,aJ as je,U as ve,m as X,aK as ee,e as S,ai as Ne,aL as we,R as P,F as A,aM as re,aN as ae,Y as q,h as g,k as u,l as h,i as y,f as te,a5 as se,a8 as _e,ab as Ce,ac as ze,av as Fe,w as ie,z as f,O as Se}from"./index-C2zOcIr5.js";import{F as de}from"./FileUpload-C0tYnj7c.js";import{u as Ee,V as Ve}from"./ViewContractModal-Cn0OQcpx.js";import{R as Me}from"./refresh-cw-BQFYSu-c.js";import{f as Be}from"./formatDistanceToNow-Zog-F_3p.js";import"./upload-DWuvDsn2.js";import"./contractUtils-B5S0O9Tf.js";const ne=({value:d="#3b82f6",onChange:x,label:a,name:b,className:I="",error:E})=>{const[k,N]=m.useState(d),[w,_]=m.useState(!1),[p,V]=m.useState(!0),C=m.useRef(null);m.useEffect(()=>{N(d)},[d]);const F=["#3b82f6","#10b981","#ef4444","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#14b8a6","#f97316","#6366f1"],M=o=>{const i=o.target.value;N(i);const B=be(i);if(V(B),B){const $=pe(i);x($)}},G=o=>{N(o),x(o),_(!1)};m.useEffect(()=>{const o=i=>{C.current&&!C.current.contains(i.target)&&_(!1)};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[]);const H=J(k,"#ffffff"),K=J(k,"#000000"),L=p&&H<4.5&&K<4.5;return e.jsxs("div",{className:`relative ${I}`,children:[a&&e.jsx("label",{htmlFor:b,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("button",{type:"button",onClick:()=>_(!w),className:"w-10 h-10 rounded-md border border-gray-300 dark:border-gray-700 flex items-center justify-center overflow-hidden shadow-sm",style:{backgroundColor:p?k:"#cccccc"},"aria-label":"Open color picker",children:!p&&e.jsx("span",{className:"text-white",children:"?"})}),e.jsxs("div",{className:"flex-grow relative",children:[e.jsx("input",{type:"text",name:b,id:b,value:k,onChange:M,className:`block w-full rounded-md sm:text-sm ${p?"border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100":"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500 dark:border-red-700 dark:text-red-300"}`,placeholder:"#RRGGBB"}),!p&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(Q,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]})]}),L&&e.jsxs("div",{className:"mt-1 text-sm text-amber-600 dark:text-amber-400 flex items-center",children:[e.jsx(Q,{size:14,className:"mr-1 flex-shrink-0"}),e.jsx("span",{children:"Low contrast with both black and white text"})]}),E&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:E}),w&&e.jsx("div",{ref:C,className:"absolute z-10 mt-1 w-full rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none p-3",children:e.jsx("div",{className:"grid grid-cols-5 gap-2",children:F.map(o=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded-md hover:scale-110 transform transition-transform ${o.toLowerCase()===k.toLowerCase()?"ring-2 ring-black dark:ring-white ring-opacity-60":""}`,style:{backgroundColor:o},onClick:()=>G(o),"aria-label":`Select color ${o}`},o))})})]})},Pe=()=>{const[d,x]=m.useState("unternehmen"),{settings:a,loading:b,error:I,updateSettings:E,uploadImage:k,refreshSettings:N,colors:w}=fe(),[_,p]=m.useState(!1),[V,C]=m.useState(null),F=ke(),{contracts:M,loading:G,error:H,fetchContracts:K,createContract:L,deleteContract:o}=Ee(),{settings:i,loading:B,updateSettings:$,uploadProfilePicture:le,removeProfilePicture:oe}=je(),[c,W]=m.useState({manager_name:"",manager_title:"",manager_bio:"",chat_enabled:!0}),[z,T]=m.useState(!1);m.useEffect(()=>{i&&!z&&W({manager_name:i.manager_name||"",manager_title:i.manager_title||"",manager_bio:i.manager_bio||"",chat_enabled:i.chat_enabled??!0})},[i,z]);const D=(r,s)=>{W(l=>({...l,[r]:s})),T(!0)},[ce,R]=m.useState(!1),[U,me]=m.useState(null),[t,j]=m.useState({company_name:"",website_name:"",website_url:"",primary_color:"",accent_color:"",contact_email:"",contact_phone:"",support_email:"",support_phone:"",registration_number:"",euid:"",court_location:"",managing_director:"",responsible_person:"",company_address:"",postal_code:"",city:"",country:"",impressum_content:"",privacy_policy_content:"",terms_content:"",kyc_required_for_tasks:!0,kyc_requirement_message:"",data_protection_officer:"",privacy_contact_email:"",company_legal_form:"GmbH",email_delay_enabled:!1,email_delay_hours:24});ve.useEffect(()=>{a&&j({company_name:a.company_name||"",website_name:a.website_name||"",website_url:a.website_url||"",primary_color:a.primary_color||"#3b82f6",accent_color:a.accent_color||"#10b981",contact_email:a.contact_email||"",contact_phone:a.contact_phone||"",support_email:a.support_email||"",support_phone:a.support_phone||"",registration_number:a.registration_number||"",euid:a.euid||"",court_location:a.court_location||"",managing_director:a.managing_director||"",responsible_person:a.responsible_person||"",company_address:a.company_address||"",postal_code:a.postal_code||"",city:a.city||"",country:a.country||"Deutschland",impressum_content:a.impressum_content||"",privacy_policy_content:a.privacy_policy_content||"",terms_content:a.terms_content||"",kyc_required_for_tasks:a.kyc_required_for_tasks!==!1,kyc_requirement_message:a.kyc_requirement_message||"",data_protection_officer:a.data_protection_officer||"",privacy_contact_email:a.privacy_contact_email||"",company_legal_form:a.company_legal_form||"GmbH",email_delay_enabled:a.email_delay_enabled||!1,email_delay_hours:a.email_delay_hours||24})},[a]);const n=r=>{const{name:s,value:l}=r.target;j(v=>({...v,[s]:l}))},xe=r=>{const{name:s,value:l}=r.target;j(v=>({...v,[s]:l}))},ge=r=>{const{name:s,value:l}=r.target;j(v=>({...v,[s]:parseFloat(l)||0}))},O=r=>{const{name:s,checked:l}=r.target;j(v=>({...v,[s]:l}))},Y=(r,s)=>{j(l=>({...l,[r]:s}))},Z=async(r,s)=>{if(r)try{await k(r,s),f.success(`${s==="logo"?"Logo":"Favicon"} uploaded successfully`),N()}catch(l){console.error("Error uploading image:",l),f.error(`Failed to upload ${s}`)}},ue=async r=>{r.preventDefault(),p(!0),C(null);try{await E(t),z&&(await $(c),T(!1)),f.success("Alle Einstellungen erfolgreich gespeichert")}catch(s){console.error("Error updating settings:",s),C(s.message||"Failed to update settings"),f.error("Fehler beim Speichern der Einstellungen")}finally{p(!1)}},he=async r=>{if(window.confirm("Sind Sie sicher, dass Sie diese Vertragsvorlage löschen möchten?"))try{await o(r),f.success("Vertragsvorlage wurde erfolgreich gelöscht.")}catch{f.error("Die Vertragsvorlage konnte nicht gelöscht werden.")}},ye=async r=>{try{const s={...r,title:`${r.title} (Kopie)`,is_template:!0,created_by:r.created_by};delete s.id,delete s.created_at,delete s.updated_at,await L(s),f.success("Vertragsvorlage wurde erfolgreich dupliziert.")}catch{f.error("Die Vertragsvorlage konnte nicht dupliziert werden.")}};return e.jsxs("div",{className:"w-full px-4 py-6",children:[e.jsx(X.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{size:24,className:"text-gray-900 dark:text-white mr-4"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-app font-app-bold text-gray-900 dark:text-white flex items-center",children:["Einstellungen",b&&e.jsx("span",{className:"ml-3 inline-block",children:e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-indigo-500 dark:border-white border-t-transparent dark:border-t-transparent rounded-full"})})]}),e.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-400 font-app",children:"Verwalten Sie die Einstellungen Ihrer Anwendung"})]})]}),e.jsxs("div",{className:"mt-4 md:mt-0 flex items-center space-x-3",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:N,disabled:b,leftIcon:e.jsx(Me,{size:16}),children:"Aktualisieren"}),e.jsxs(S,{size:"md",type:"submit",form:"settings-form",disabled:b||_,leftIcon:e.jsx(Ne,{size:16}),style:{backgroundColor:w.primary,color:"white"},className:`hover:opacity-90 transition-opacity ${z?"ring-2 ring-amber-300":""}`,children:[_?"Speichere...":"Speichern",z&&e.jsx("span",{className:"ml-2 w-2 h-2 rounded-full bg-amber-300"})]})]})]})}),b?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading settings..."})]}):e.jsxs("form",{id:"settings-form",onSubmit:ue,children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-8 overflow-x-auto","aria-label":"Tabs",children:[e.jsxs("button",{type:"button",onClick:()=>x("unternehmen"),className:`${d==="unternehmen"?"border-primary text-primary dark:text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(we,{className:"mr-2",size:18}),"Unternehmen"]}),e.jsxs("button",{type:"button",onClick:()=>x("kontakt"),className:`${d==="kontakt"?"border-primary text-primary dark:text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(P,{className:"mr-2",size:18}),"Kontakt"]}),e.jsxs("button",{type:"button",onClick:()=>x("legal"),className:`${d==="legal"?"border-primary text-primary dark:text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(A,{className:"mr-2",size:18}),"Rechtliches"]}),e.jsxs("button",{type:"button",onClick:()=>x("logo"),className:`${d==="logo"?"border-primary text-primary dark:text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(re,{className:"mr-2",size:18}),"Logo & Favicon"]}),e.jsxs("button",{type:"button",onClick:()=>x("branding"),className:`${d==="branding"?"border-primary text-primary dark:text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(ee,{className:"mr-2",size:18}),"Branding"]}),e.jsxs("button",{type:"button",onClick:()=>x("kyc"),className:`${d==="kyc"?"border-primary text-primary dark:text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(ae,{className:"mr-2",size:18}),"KYC Verifizierung"]}),e.jsxs("button",{type:"button",onClick:()=>x("email"),className:`${d==="email"?"border-primary text-primary dark:text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(P,{className:"mr-2",size:18}),"E-Mail"]}),e.jsxs("button",{type:"button",onClick:()=>x("vertraege"),className:`${d==="vertraege"?"border-primary text-primary dark:text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(A,{className:"mr-2",size:18}),"Verträge"]}),e.jsxs("button",{type:"button",onClick:()=>x("livechat"),className:`${d==="livechat"?"border-primary text-primary dark:text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(q,{className:"mr-2",size:18}),"Live Chat"]})]})})}),d==="unternehmen"&&e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(h,{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Unternehmensinformationen"})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Unternehmensname"}),e.jsx("input",{type:"text",id:"company_name",name:"company_name",value:t.company_name,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"website_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website Name"}),e.jsx("input",{type:"text",id:"website_name",name:"website_name",value:t.website_name,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",required:!0}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Wird für den Dokumententitel und Überschriften verwendet."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"website_url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website URL"}),e.jsx("input",{type:"url",id:"website_url",name:"website_url",value:t.website_url,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200 placeholder:text-gray-400 dark:placeholder:text-gray-500",placeholder:"https://example.com"})]})]})]}),d==="kontakt"&&e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(h,{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Kontaktinformationen"})}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contact_email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Haupt-E-Mail"}),e.jsx("input",{type:"email",id:"contact_email",name:"contact_email",value:t.contact_email,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"info@unternehmen.de"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contact_phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Haupt-Telefon"}),e.jsx("input",{type:"tel",id:"contact_phone",name:"contact_phone",value:t.contact_phone,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"+49 (0) 123 456 789"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"support_email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Support-E-Mail"}),e.jsx("input",{type:"email",id:"support_email",name:"support_email",value:t.support_email,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"support@unternehmen.de"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"support_phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Support-Telefon"}),e.jsx("input",{type:"tel",id:"support_phone",name:"support_phone",value:t.support_phone,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"+49 (0) 123 456 790"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Firmenadresse"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company_address",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Straße und Hausnummer"}),e.jsx("input",{type:"text",id:"company_address",name:"company_address",value:t.company_address,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"[Straße und Hausnummer]"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"postal_code",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"PLZ"}),e.jsx("input",{type:"text",id:"postal_code",name:"postal_code",value:t.postal_code,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"[PLZ]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Stadt"}),e.jsx("input",{type:"text",id:"city",name:"city",value:t.city,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"[Stadt]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Land"}),e.jsx("input",{type:"text",id:"country",name:"country",value:t.country,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"Deutschland"})]})]})]})]})]})]}),d==="legal"&&e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(h,{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Rechtliche Informationen"})}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"registration_number",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Handelsregisternummer"}),e.jsx("input",{type:"text",id:"registration_number",name:"registration_number",value:t.registration_number,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"[z.B. HRB 123456]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"court_location",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Registergericht"}),e.jsx("input",{type:"text",id:"court_location",name:"court_location",value:t.court_location,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"[z.B. Amtsgericht Berlin]"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"euid",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Umsatzsteuer-ID"}),e.jsx("input",{type:"text",id:"euid",name:"euid",value:t.euid,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"[z.B. DE123456789]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"managing_director",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Geschäftsführer"}),e.jsx("input",{type:"text",id:"managing_director",name:"managing_director",value:t.managing_director,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"[Geschäftsführer]"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"responsible_person",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verantwortlich für den Inhalt"}),e.jsx("input",{type:"text",id:"responsible_person",name:"responsible_person",value:t.responsible_person,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"[Geschäftsführer]"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Gemäß § 55 Abs. 2 RStV"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company_legal_form",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rechtsform"}),e.jsxs("select",{id:"company_legal_form",name:"company_legal_form",value:t.company_legal_form,onChange:xe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"GmbH",children:"GmbH"}),e.jsx("option",{value:"AG",children:"AG"}),e.jsx("option",{value:"UG",children:"UG (haftungsbeschränkt)"}),e.jsx("option",{value:"KG",children:"KG"}),e.jsx("option",{value:"OHG",children:"OHG"}),e.jsx("option",{value:"e.K.",children:"e.K."}),e.jsx("option",{value:"Einzelunternehmen",children:"Einzelunternehmen"}),e.jsx("option",{value:"Freiberufler",children:"Freiberufler"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"data_protection_officer",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Datenschutzbeauftragter"}),e.jsx("input",{type:"text",id:"data_protection_officer",name:"data_protection_officer",value:t.data_protection_officer,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"[Optional für DSGVO-Compliance]"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Optional: Für DSGVO-Compliance"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"privacy_contact_email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Datenschutz-Kontakt E-Mail"}),e.jsx("input",{type:"email",id:"privacy_contact_email",name:"privacy_contact_email",value:t.privacy_contact_email,onChange:n,className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200",placeholder:"datenschutz@unternehmen.de"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Separate E-Mail für Datenschutzanfragen (falls abweichend von Haupt-E-Mail)"})]})]})]}),d==="logo"&&e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(h,{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Logo & Favicon"})}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Logo"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsx("div",{className:"w-full md:w-2/3",children:e.jsx(de,{acceptedTypes:["image/png","image/jpeg","image/svg+xml","image/webp"],onFileSelect:r=>Z(r,"logo"),label:"Upload Logo",previewUrl:a==null?void 0:a.logo_url})}),(a==null?void 0:a.logo_url)&&e.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-md",children:[e.jsx("img",{src:a.logo_url,alt:"Current Logo",className:"max-h-24 max-w-full"}),e.jsx("p",{className:"text-center text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Current Logo"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Favicon"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsx("div",{className:"w-full md:w-2/3",children:e.jsx(de,{acceptedTypes:["image/png","image/jpeg","image/svg+xml","image/x-icon","image/vnd.microsoft.icon"],onFileSelect:r=>Z(r,"favicon"),label:"Upload Favicon",previewUrl:a==null?void 0:a.favicon_url})}),(a==null?void 0:a.favicon_url)&&e.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-md",children:[e.jsx("img",{src:a.favicon_url,alt:"Current Favicon",className:"max-h-16 max-w-full"}),e.jsx("p",{className:"text-center text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Current Favicon"})]})})]})]})]})]}),d==="branding"&&e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(h,{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Markenfarben"})}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Primärfarbe"}),e.jsx(ne,{value:t.primary_color||"#3b82f6",onChange:r=>Y("primary_color",r)}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Wird für Buttons, Links und primäre Elemente verwendet."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Akzentfarbe"}),e.jsx(ne,{value:t.accent_color||"#10b981",onChange:r=>Y("accent_color",r)}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Wird für Highlights, Erfolgszustände und sekundäre Aktionen verwendet."})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Farbvorschau"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-md border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Primärfarbe"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-12 rounded-md flex items-center justify-center text-white",style:{backgroundColor:t.primary_color},children:"Primary Button"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("div",{className:"h-8 rounded-md flex items-center justify-center text-white text-xs",style:{backgroundColor:t.primary_color},children:"Normal"}),e.jsx("div",{className:"h-8 rounded-md flex items-center justify-center text-white text-xs",style:{backgroundColor:t.primary_color+"99"},children:"Transparent"}),e.jsx("div",{className:"h-8 rounded-md flex items-center justify-center text-xs text-gray-800 dark:text-white",style:{backgroundColor:t.primary_color+"33"},children:"Sehr Hell"})]})]})]}),e.jsxs("div",{className:"p-4 rounded-md border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Akzentfarbe"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-12 rounded-md flex items-center justify-center text-white",style:{backgroundColor:t.accent_color},children:"Accent Button"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("div",{className:"h-8 rounded-md flex items-center justify-center text-white text-xs",style:{backgroundColor:t.accent_color},children:"Normal"}),e.jsx("div",{className:"h-8 rounded-md flex items-center justify-center text-white text-xs",style:{backgroundColor:t.accent_color+"99"},children:"Transparent"}),e.jsx("div",{className:"h-8 rounded-md flex items-center justify-center text-xs text-gray-800 dark:text-white",style:{backgroundColor:t.accent_color+"33"},children:"Sehr Hell"})]})]})]})]})]})]})]}),d==="kyc"&&e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(h,{className:"text-xl font-medium text-gray-900 dark:text-white",children:"KYC Verifizierung Einstellungen"})}),e.jsxs(y,{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-500 dark:text-blue-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Sicherheitshinweis"}),e.jsx("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:"Diese Einstellungen kontrollieren, ob Mitarbeiter erst ihre KYC-Verifizierung abschließen müssen, bevor sie auf Aufgaben zugreifen können. Aus Sicherheitsgründen ist dies standardmäßig aktiviert."})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",id:"kyc_required_for_tasks",name:"kyc_required_for_tasks",checked:t.kyc_required_for_tasks,onChange:O,className:"mt-1 h-4 w-4 text-primary focus:ring-primary border-gray-300 dark:border-gray-600 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"kyc_required_for_tasks",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"KYC-Verifizierung für Aufgabenzugriff erforderlich"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Wenn aktiviert, können Mitarbeiter erst nach erfolgreicher KYC-Genehmigung auf Aufgaben zugreifen. Admin-Benutzer sind von dieser Einschränkung ausgenommen."})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"kyc_requirement_message",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Benutzerdefinierte KYC-Nachricht"}),e.jsx("textarea",{id:"kyc_requirement_message",name:"kyc_requirement_message",rows:3,value:t.kyc_requirement_message,onChange:r=>j(s=>({...s,kyc_requirement_message:r.target.value})),className:"block w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-primary dark:focus:border-primary focus:ring-2 focus:ring-primary/20 dark:focus:ring-primary/30 sm:text-sm transition-colors duration-200 resize-none",placeholder:"Geben Sie eine benutzerdefinierte Nachricht ein, die Benutzern angezeigt wird, wenn ihre KYC-Verifizierung erforderlich ist..."}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Optional: Eine personalisierte Nachricht, die Mitarbeitern angezeigt wird, wenn sie ihre KYC-Verifizierung abschließen müssen. Wenn leer, wird eine Standardnachricht verwendet."})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Aktuelle KYC-Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-md",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status wird beim Speichern aktualisiert"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.kyc_required_for_tasks?"Aktiviert":"Deaktiviert"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-md",children:[e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Genehmigte Benutzer"}),e.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Wird automatisch berechnet"})]}),e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-md",children:[e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:"Ausstehende Überprüfung"}),e.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Wird automatisch berechnet"})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"Blockierte Benutzer"}),e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Wird automatisch berechnet"})]})]})]})]})]})]}),d==="email"&&e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(h,{className:"text-xl font-medium text-gray-900 dark:text-white",children:"E-Mail Einstellungen"})}),e.jsxs(y,{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(P,{className:"h-5 w-5 text-blue-500 dark:text-blue-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"E-Mail Verzögerung"}),e.jsx("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:"Konfigurieren Sie die automatische Verzögerung beim Versenden von E-Mails. Dies kann hilfreich sein, um versehentliche Sendungen zu vermeiden."})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",id:"email_delay_enabled",name:"email_delay_enabled",checked:t.email_delay_enabled,onChange:O,className:"mt-1 h-4 w-4 text-primary focus:ring-primary border-gray-300 dark:border-gray-600 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"email_delay_enabled",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"E-Mail Verzögerung aktivieren"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Wenn aktiviert, werden E-Mails nicht sofort versendet, sondern nach der konfigurierten Wartezeit."})]})]}),t.email_delay_enabled&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email_delay_hours",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verzögerung in Stunden"}),e.jsx("input",{type:"number",id:"email_delay_hours",name:"email_delay_hours",value:t.email_delay_hours,onChange:ge,min:"1",max:"168",className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"24"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Anzahl der Stunden, um die E-Mails verzögert werden sollen (1-168 Stunden / max. 7 Tage)."})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(te,{className:"h-5 w-5 text-yellow-500 dark:text-yellow-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Hinweis zur E-Mail Verzögerung"}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700 dark:text-yellow-300",children:"Diese Einstellung betrifft automatisch generierte E-Mails wie Benachrichtigungen und Bestätigungen. Kritische E-Mails wie Passwort-Resets werden weiterhin sofort versendet."})]})]})})]})]})]}),d==="vertraege"&&e.jsxs(g,{children:[e.jsx(u,{children:e.jsxs(h,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Vertragsvorlagen"}),e.jsx(S,{size:"sm",onClick:()=>F("/admin/contracts/create"),leftIcon:e.jsx(se,{size:16}),style:{backgroundColor:w.primary,color:"white"},className:"hover:opacity-90 transition-opacity",children:"Neue Vorlage"})]})}),e.jsx(y,{children:G?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-primary border-t-transparent rounded-full"})}):H?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400",children:"Fehler beim Laden der Verträge"}),e.jsx(S,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>K(!0),children:"Erneut versuchen"})]}):M.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:e.jsx(A,{size:24,className:"text-gray-400 dark:text-gray-500"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Keine Vertragsvorlagen gefunden"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-md mx-auto mb-4",children:"Erstellen Sie eine neue Vertragsvorlage, um loszulegen."}),e.jsx(S,{onClick:()=>F("/admin/contracts/create"),leftIcon:e.jsx(se,{size:16}),style:{backgroundColor:w.primary,color:"white"},className:"hover:opacity-90 transition-opacity",children:"Erste Vorlage erstellen"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(r=>e.jsxs(X.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{size:18,className:"text-gray-500 dark:text-gray-400 mr-2"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:r.title})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:r.is_active?"Aktiv":"Inaktiv"})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-1",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded p-2",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Kategorie"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.category})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded p-2",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Version"}),e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["v",r.version_number||1]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded p-2 col-span-2",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Zuletzt bearbeitet"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.updated_at?Be(new Date(r.updated_at),{addSuffix:!0,locale:Se}):"-"})]})]})}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700/30 border-t border-gray-100 dark:border-gray-700 flex justify-end items-center",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{me(r),R(!0)},className:"text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400 flex items-center p-1.5",title:"Ansehen",children:e.jsx(_e,{size:20})}),e.jsx("button",{onClick:()=>F(`/admin/contracts/${r.id}/edit`),className:"text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400 flex items-center p-1.5",title:"Bearbeiten",children:e.jsx(Ce,{size:20})}),e.jsx("button",{onClick:()=>ye(r),className:"text-gray-500 hover:text-amber-600 dark:text-gray-400 dark:hover:text-amber-400 flex items-center p-1.5",title:"Duplizieren",children:e.jsx(ze,{size:20})}),e.jsx("button",{onClick:()=>he(r.id),className:"text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 flex items-center p-1.5",title:"Löschen",children:e.jsx(Fe,{size:20})})]})})]},r.id))})})]}),d==="livechat"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(g,{children:[e.jsx(u,{children:e.jsxs(h,{className:"flex items-center",children:[e.jsx(q,{className:"mr-2",size:20}),"Chat Manager Profil"]})}),e.jsx(y,{children:B?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsxs("div",{className:"relative",children:[i!=null&&i.manager_avatar_url?e.jsx("img",{src:i.manager_avatar_url,alt:i.manager_name,className:"w-20 h-20 rounded-full object-cover border-4 border-gray-200 dark:border-gray-600"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center border-4 border-gray-200 dark:border-gray-600",children:e.jsx(ie,{size:32,className:"text-gray-500 dark:text-gray-400"})}),e.jsxs("label",{className:"absolute inset-0 w-20 h-20 rounded-full bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer",children:[e.jsx(re,{size:20,className:"text-white"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:r=>{var l;const s=(l=r.target.files)==null?void 0:l[0];s&&le(s)}})]})]}),(i==null?void 0:i.manager_avatar_url)&&e.jsx("button",{onClick:oe,className:"mt-2 text-xs text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:"Bild entfernen"})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name des Chat Managers"}),e.jsx("input",{type:"text",value:c.manager_name,onChange:r=>D("manager_name",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"z.B. Markus Friedel"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Position/Titel"}),e.jsx("input",{type:"text",value:c.manager_title,onChange:r=>D("manager_title",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"z.B. Projektleiter"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Kurze Beschreibung"}),e.jsx("textarea",{value:c.manager_bio,onChange:r=>D("manager_bio",r.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Kurze Beschreibung des Chat Managers..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:"Chat Status"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${c.chat_enabled?"bg-green-500":"bg-gray-400"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Live Chat ",c.chat_enabled?"Aktiviert":"Deaktiviert"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.chat_enabled?"Chat Widget ist für alle Benutzer sichtbar":"Chat Widget ist ausgeblendet und nicht verfügbar"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.chat_enabled,onChange:r=>D("chat_enabled",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),z&&e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-amber-600 dark:text-amber-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),e.jsx("p",{children:'Ungespeicherte Änderungen - Verwende den "Speichern" Button oben'})]})})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Vorschau im Chat"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${c.chat_enabled?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.chat_enabled?"Aktiviert":"Deaktiviert"})]})]}),e.jsxs("div",{className:`bg-gray-50 dark:bg-gray-800 rounded-lg p-4 relative ${c.chat_enabled?"":"opacity-50"}`,children:[!c.chat_enabled&&e.jsx("div",{className:"absolute inset-0 bg-gray-900 bg-opacity-50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx(q,{size:24,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm font-medium",children:"Chat Deaktiviert"}),e.jsx("p",{className:"text-xs opacity-75",children:"Für Benutzer nicht sichtbar"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[i!=null&&i.manager_avatar_url?e.jsx("img",{src:i.manager_avatar_url,alt:i.manager_name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:e.jsx(ie,{size:20,className:"text-gray-500 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:c.manager_name||"Markus Friedel"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.manager_title||"Projektleiter"})]})]}),e.jsx("div",{className:"mt-3 bg-white dark:bg-gray-700 rounded-lg p-3 ml-13",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Hallo! Hier ist ",c.manager_name||"Markus"," von der Projektleitung. Wie kann ich dir heute helfen?"]})})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-200 mb-2",children:"Hinweise zur Chat Manager Konfiguration"}),e.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-300 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Chat Status:"})," Aktiviert/Deaktiviert das Chat Widget für alle Benutzer"]}),e.jsx("li",{children:"• Das Profilbild sollte professionell und freundlich sein"}),e.jsx("li",{children:"• Der Name wird in allen Chat-Nachrichten verwendet"}),e.jsx("li",{children:"• Der Titel erscheint unter dem Namen im Chat-Header"}),e.jsx("li",{children:"• Empfohlene Bildgröße: 200x200 Pixel, max. 5MB"}),e.jsx("li",{children:"• Unterstützte Formate: JPG, PNG, WebP"}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Deaktiviert:"})," Chat Widget wird nicht angezeigt, bestehende Gespräche bleiben erhalten"]})]})]})]})})]})}),V&&e.jsx("div",{className:"mt-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:e.jsxs("div",{className:"flex",children:[e.jsx(te,{className:"h-5 w-5 text-red-500 dark:text-red-400 mr-3"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:V})]})})]}),U&&e.jsx(Ve,{isOpen:ce,onClose:()=>R(!1),contract:U,isAdmin:!0})]})};export{Pe as default};
